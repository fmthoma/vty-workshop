<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-| General purpose utilities

    The names in this module clash heavily with the Haskell Prelude, so I
    recommend the following import scheme:

&gt; import Pipes
&gt; import qualified Pipes.Prelude as P  -- or use any other qualifier you prefer

    Note that 'String'-based 'IO' is inefficient.  The 'String'-based utilities
    in this module exist only for simple demonstrations without incurring a
    dependency on the @text@ package.

    Also, 'stdinLn' and 'stdoutLn' remove and add newlines, respectively.  This
    behavior is intended to simplify examples.  The corresponding @stdin@ and
    @stdout@ utilities from @pipes-bytestring@ and @pipes-text@ preserve
    newlines.
-}</span><span>
</span><a name="line-18"></a><span>
</span><a name="line-19"></a><span class="hs-pragma">{-# LANGUAGE RankNTypes, Trustworthy #-}</span><span>
</span><a name="line-20"></a><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-unused-do-bind #-}</span><span>
</span><a name="line-21"></a><span>
</span><a name="line-22"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Pipes</span><span class="hs-operator">.</span><span class="hs-identifier">Prelude</span><span> </span><span class="hs-special">(</span><span>
</span><a name="line-23"></a><span>    </span><span class="hs-comment">-- * Producers</span><span>
</span><a name="line-24"></a><span>    </span><span class="hs-comment">-- $producers</span><span>
</span><a name="line-25"></a><span>      </span><a href="Pipes.Prelude.html#stdinLn"><span class="hs-identifier hs-var">stdinLn</span></a><span>
</span><a name="line-26"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#readLn"><span class="hs-identifier hs-var">readLn</span></a><span>
</span><a name="line-27"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#fromHandle"><span class="hs-identifier hs-var">fromHandle</span></a><span>
</span><a name="line-28"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#repeatM"><span class="hs-identifier hs-var">repeatM</span></a><span>
</span><a name="line-29"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#replicateM"><span class="hs-identifier hs-var">replicateM</span></a><span>
</span><a name="line-30"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#unfoldr"><span class="hs-identifier hs-var">unfoldr</span></a><span>
</span><a name="line-31"></a><span>
</span><a name="line-32"></a><span>    </span><span class="hs-comment">-- * Consumers</span><span>
</span><a name="line-33"></a><span>    </span><span class="hs-comment">-- $consumers</span><span>
</span><a name="line-34"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#stdoutLn"><span class="hs-identifier hs-var">stdoutLn</span></a><span>
</span><a name="line-35"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#stdoutLn%27"><span class="hs-identifier hs-var">stdoutLn'</span></a><span>
</span><a name="line-36"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a><span>
</span><a name="line-37"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#print"><span class="hs-identifier hs-var">print</span></a><span>
</span><a name="line-38"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#toHandle"><span class="hs-identifier hs-var">toHandle</span></a><span>
</span><a name="line-39"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#drain"><span class="hs-identifier hs-var">drain</span></a><span>
</span><a name="line-40"></a><span>
</span><a name="line-41"></a><span>    </span><span class="hs-comment">-- * Pipes</span><span>
</span><a name="line-42"></a><span>    </span><span class="hs-comment">-- $pipes</span><span>
</span><a name="line-43"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#map"><span class="hs-identifier hs-var">map</span></a><span>
</span><a name="line-44"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span>
</span><a name="line-45"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#sequence"><span class="hs-identifier hs-var">sequence</span></a><span>
</span><a name="line-46"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#mapFoldable"><span class="hs-identifier hs-var">mapFoldable</span></a><span>
</span><a name="line-47"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#filter"><span class="hs-identifier hs-var">filter</span></a><span>
</span><a name="line-48"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#filterM"><span class="hs-identifier hs-var">filterM</span></a><span>
</span><a name="line-49"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#take"><span class="hs-identifier hs-var">take</span></a><span>
</span><a name="line-50"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#takeWhile"><span class="hs-identifier hs-var">takeWhile</span></a><span>
</span><a name="line-51"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#takeWhile%27"><span class="hs-identifier hs-var">takeWhile'</span></a><span>
</span><a name="line-52"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#drop"><span class="hs-identifier hs-var">drop</span></a><span>
</span><a name="line-53"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#dropWhile"><span class="hs-identifier hs-var">dropWhile</span></a><span>
</span><a name="line-54"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#concat"><span class="hs-identifier hs-var">concat</span></a><span>
</span><a name="line-55"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#elemIndices"><span class="hs-identifier hs-var">elemIndices</span></a><span>
</span><a name="line-56"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#findIndices"><span class="hs-identifier hs-var">findIndices</span></a><span>
</span><a name="line-57"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#scan"><span class="hs-identifier hs-var">scan</span></a><span>
</span><a name="line-58"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#scanM"><span class="hs-identifier hs-var">scanM</span></a><span>
</span><a name="line-59"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#chain"><span class="hs-identifier hs-var">chain</span></a><span>
</span><a name="line-60"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#read"><span class="hs-identifier hs-var">read</span></a><span>
</span><a name="line-61"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#show"><span class="hs-identifier hs-var">show</span></a><span>
</span><a name="line-62"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#seq"><span class="hs-identifier hs-var">seq</span></a><span>
</span><a name="line-63"></a><span>
</span><a name="line-64"></a><span>    </span><span class="hs-comment">-- *ListT</span><span>
</span><a name="line-65"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#loop"><span class="hs-identifier hs-var">loop</span></a><span>
</span><a name="line-66"></a><span>
</span><a name="line-67"></a><span>    </span><span class="hs-comment">-- * Folds</span><span>
</span><a name="line-68"></a><span>    </span><span class="hs-comment">-- $folds</span><span>
</span><a name="line-69"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#fold"><span class="hs-identifier hs-var">fold</span></a><span>
</span><a name="line-70"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#fold%27"><span class="hs-identifier hs-var">fold'</span></a><span>
</span><a name="line-71"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#foldM"><span class="hs-identifier hs-var">foldM</span></a><span>
</span><a name="line-72"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#foldM%27"><span class="hs-identifier hs-var">foldM'</span></a><span>
</span><a name="line-73"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#all"><span class="hs-identifier hs-var">all</span></a><span>
</span><a name="line-74"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#any"><span class="hs-identifier hs-var">any</span></a><span>
</span><a name="line-75"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#and"><span class="hs-identifier hs-var">and</span></a><span>
</span><a name="line-76"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#or"><span class="hs-identifier hs-var">or</span></a><span>
</span><a name="line-77"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#elem"><span class="hs-identifier hs-var">elem</span></a><span>
</span><a name="line-78"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#notElem"><span class="hs-identifier hs-var">notElem</span></a><span>
</span><a name="line-79"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#find"><span class="hs-identifier hs-var">find</span></a><span>
</span><a name="line-80"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#findIndex"><span class="hs-identifier hs-var">findIndex</span></a><span>
</span><a name="line-81"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#head"><span class="hs-identifier hs-var">head</span></a><span>
</span><a name="line-82"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#index"><span class="hs-identifier hs-var">index</span></a><span>
</span><a name="line-83"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#last"><span class="hs-identifier hs-var">last</span></a><span>
</span><a name="line-84"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#length"><span class="hs-identifier hs-var">length</span></a><span>
</span><a name="line-85"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#maximum"><span class="hs-identifier hs-var">maximum</span></a><span>
</span><a name="line-86"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#minimum"><span class="hs-identifier hs-var">minimum</span></a><span>
</span><a name="line-87"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#null"><span class="hs-identifier hs-var">null</span></a><span>
</span><a name="line-88"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#sum"><span class="hs-identifier hs-var">sum</span></a><span>
</span><a name="line-89"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#product"><span class="hs-identifier hs-var">product</span></a><span>
</span><a name="line-90"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#toList"><span class="hs-identifier hs-var">toList</span></a><span>
</span><a name="line-91"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#toListM"><span class="hs-identifier hs-var">toListM</span></a><span>
</span><a name="line-92"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#toListM%27"><span class="hs-identifier hs-var">toListM'</span></a><span>
</span><a name="line-93"></a><span>
</span><a name="line-94"></a><span>    </span><span class="hs-comment">-- * Zips</span><span>
</span><a name="line-95"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#zip"><span class="hs-identifier hs-var">zip</span></a><span>
</span><a name="line-96"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#zipWith"><span class="hs-identifier hs-var">zipWith</span></a><span>
</span><a name="line-97"></a><span>
</span><a name="line-98"></a><span>    </span><span class="hs-comment">-- * Utilities</span><span>
</span><a name="line-99"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#tee"><span class="hs-identifier hs-var">tee</span></a><span>
</span><a name="line-100"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#generalize"><span class="hs-identifier hs-var">generalize</span></a><span>
</span><a name="line-101"></a><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-102"></a><span>
</span><a name="line-103"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Exception</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">throwIO</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">try</span><span class="hs-special">)</span><span>
</span><a name="line-104"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">liftM</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">when</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">unless</span><span class="hs-special">)</span><span>
</span><a name="line-105"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span class="hs-operator">.</span><span class="hs-identifier">Trans</span><span class="hs-operator">.</span><span class="hs-identifier">State</span><span class="hs-operator">.</span><span class="hs-identifier">Strict</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">get</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">put</span><span class="hs-special">)</span><span>
</span><a name="line-106"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Functor</span><span class="hs-operator">.</span><span class="hs-identifier">Identity</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Identity</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">runIdentity</span><span class="hs-special">)</span><span>
</span><a name="line-107"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Foreign</span><span class="hs-operator">.</span><span class="hs-identifier">C</span><span class="hs-operator">.</span><span class="hs-identifier">Error</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Errno</span><span class="hs-special">(</span><span class="hs-identifier hs-var">Errno</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">ePIPE</span><span class="hs-special">)</span><span>
</span><a name="line-108"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">GHC</span><span class="hs-operator">.</span><span class="hs-identifier">Exts</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">build</span><span class="hs-special">)</span><span>
</span><a name="line-109"></a><span class="hs-keyword">import</span><span> </span><a href="Pipes.html"><span class="hs-identifier">Pipes</span></a><span>
</span><a name="line-110"></a><span class="hs-keyword">import</span><span> </span><a href="Pipes.Core.html"><span class="hs-identifier">Pipes</span><span class="hs-operator">.</span><span class="hs-identifier">Core</span></a><span>
</span><a name="line-111"></a><span class="hs-keyword">import</span><span> </span><a href="Pipes.Internal.html"><span class="hs-identifier">Pipes</span><span class="hs-operator">.</span><span class="hs-identifier">Internal</span></a><span>
</span><a name="line-112"></a><span class="hs-keyword">import</span><span> </span><a href="Pipes.Lift.html"><span class="hs-identifier">Pipes</span><span class="hs-operator">.</span><span class="hs-identifier">Lift</span></a><span> </span><span class="hs-special">(</span><a href="Pipes.Lift.html#evalStateP"><span class="hs-identifier hs-var">evalStateP</span></a><span class="hs-special">)</span><span>
</span><a name="line-113"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">GHC</span><span class="hs-operator">.</span><span class="hs-identifier">IO</span><span class="hs-operator">.</span><span class="hs-identifier">Exception</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">G</span><span>
</span><a name="line-114"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">System</span><span class="hs-operator">.</span><span class="hs-identifier">IO</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">IO</span><span>
</span><a name="line-115"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Prelude</span><span>
</span><a name="line-116"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Prelude</span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span>
</span><a name="line-117"></a><span>      </span><span class="hs-identifier hs-var">all</span><span>
</span><a name="line-118"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">and</span><span>
</span><a name="line-119"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">any</span><span>
</span><a name="line-120"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">concat</span><span>
</span><a name="line-121"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">drop</span><span>
</span><a name="line-122"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">dropWhile</span><span>
</span><a name="line-123"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">elem</span><span>
</span><a name="line-124"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">filter</span><span>
</span><a name="line-125"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">head</span><span>
</span><a name="line-126"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">last</span><span>
</span><a name="line-127"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">length</span><span>
</span><a name="line-128"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">map</span><span>
</span><a name="line-129"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">mapM</span><span>
</span><a name="line-130"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span>
</span><a name="line-131"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">maximum</span><span>
</span><a name="line-132"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">minimum</span><span>
</span><a name="line-133"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">notElem</span><span>
</span><a name="line-134"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">null</span><span>
</span><a name="line-135"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">or</span><span>
</span><a name="line-136"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">print</span><span>
</span><a name="line-137"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">product</span><span>
</span><a name="line-138"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">read</span><span>
</span><a name="line-139"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">readLn</span><span>
</span><a name="line-140"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">sequence</span><span>
</span><a name="line-141"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">show</span><span>
</span><a name="line-142"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">seq</span><span>
</span><a name="line-143"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">sum</span><span>
</span><a name="line-144"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">take</span><span>
</span><a name="line-145"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">takeWhile</span><span>
</span><a name="line-146"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">zip</span><span>
</span><a name="line-147"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">zipWith</span><span>
</span><a name="line-148"></a><span>    </span><span class="hs-special">)</span><span>
</span><a name="line-149"></a><span>
</span><a name="line-150"></a><span class="hs-comment">{- $producers
    Use 'for' loops to iterate over 'Producer's whenever you want to perform the
    same action for every element:

&gt; -- Echo all lines from standard input to standard output
&gt; runEffect $ for P.stdinLn $ \str -&gt; do
&gt;     lift $ putStrLn str

    ... or more concisely:

&gt;&gt;&gt; runEffect $ for P.stdinLn (lift . putStrLn)
Test&lt;Enter&gt;
Test
ABC&lt;Enter&gt;
ABC
...

-}</span><span>
</span><a name="line-168"></a><span>
</span><a name="line-169"></a><span class="hs-comment">{-| Read 'String's from 'IO.stdin' using 'getLine'

    Terminates on end of input
-}</span><span>
</span><a name="line-173"></a><span class="hs-identifier">stdinLn</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadIO</span><span> </span><a href="#local-6989586621679072265"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer%27"><span class="hs-identifier hs-type">Producer'</span></a><span> </span><span class="hs-identifier hs-type">String</span><span> </span><a href="#local-6989586621679072265"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-174"></a><a name="stdinLn"><a href="Pipes.Prelude.html#stdinLn"><span class="hs-identifier">stdinLn</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#fromHandle"><span class="hs-identifier hs-var">fromHandle</span></a><span> </span><span class="hs-identifier hs-var">IO</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">stdin</span><span>
</span><a name="line-175"></a><span class="hs-pragma">{-# INLINABLE stdinLn #-}</span><span>
</span><a name="line-176"></a><span>
</span><a name="line-177"></a><span class="hs-comment">-- | 'read' values from 'IO.stdin', ignoring failed parses</span><span>
</span><a name="line-178"></a><span class="hs-identifier">readLn</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">MonadIO</span><span> </span><a href="#local-6989586621679072263"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Read</span><span> </span><a href="#local-6989586621679072264"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer%27"><span class="hs-identifier hs-type">Producer'</span></a><span> </span><a href="#local-6989586621679072264"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679072263"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-179"></a><a name="readLn"><a href="Pipes.Prelude.html#readLn"><span class="hs-identifier">readLn</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#stdinLn"><span class="hs-identifier hs-var">stdinLn</span></a><span> </span><a href="Pipes.html#%3E-%3E"><span class="hs-operator hs-var">&gt;-&gt;</span></a><span> </span><a href="Pipes.Prelude.html#read"><span class="hs-identifier hs-var">read</span></a><span>
</span><a name="line-180"></a><span class="hs-pragma">{-# INLINABLE readLn #-}</span><span>
</span><a name="line-181"></a><span>
</span><a name="line-182"></a><span class="hs-comment">{-| Read 'String's from a 'IO.Handle' using 'IO.hGetLine'

    Terminates on end of input
-}</span><span>
</span><a name="line-186"></a><span class="hs-identifier">fromHandle</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadIO</span><span> </span><a href="#local-6989586621679072262"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">Handle</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer%27"><span class="hs-identifier hs-type">Producer'</span></a><span> </span><span class="hs-identifier hs-type">String</span><span> </span><a href="#local-6989586621679072262"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-187"></a><a name="fromHandle"><a href="Pipes.Prelude.html#fromHandle"><span class="hs-identifier">fromHandle</span></a></a><span> </span><a name="local-6989586621679072335"><a href="#local-6989586621679072335"><span class="hs-identifier">h</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679072336"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-188"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-189"></a><span>    </span><a name="local-6989586621679072336"><a href="#local-6989586621679072336"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-190"></a><span>        </span><a name="local-6989586621679072548"><a href="#local-6989586621679072548"><span class="hs-identifier">eof</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">liftIO</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">IO</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">hIsEOF</span><span> </span><a href="#local-6989586621679072335"><span class="hs-identifier hs-var">h</span></a><span>
</span><a name="line-191"></a><span>        </span><span class="hs-identifier hs-var">unless</span><span> </span><a href="#local-6989586621679072548"><span class="hs-identifier hs-var">eof</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-192"></a><span>            </span><a name="local-6989586621679072656"><a href="#local-6989586621679072656"><span class="hs-identifier">str</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">liftIO</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">IO</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">hGetLine</span><span> </span><a href="#local-6989586621679072335"><span class="hs-identifier hs-var">h</span></a><span>
</span><a name="line-193"></a><span>            </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679072656"><span class="hs-identifier hs-var">str</span></a><span>
</span><a name="line-194"></a><span>            </span><a href="#local-6989586621679072336"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-195"></a><span class="hs-pragma">{-# INLINABLE fromHandle #-}</span><span>
</span><a name="line-196"></a><span>
</span><a name="line-197"></a><span class="hs-comment">-- | Repeat a monadic action indefinitely, 'yield'ing each result</span><span>
</span><a name="line-198"></a><span class="hs-identifier">repeatM</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679072259"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679072259"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679072260"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer%27"><span class="hs-identifier hs-type">Producer'</span></a><span> </span><a href="#local-6989586621679072260"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679072259"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679072261"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-199"></a><a name="repeatM"><a href="Pipes.Prelude.html#repeatM"><span class="hs-identifier">repeatM</span></a></a><span> </span><a name="local-6989586621679072657"><a href="#local-6989586621679072657"><span class="hs-identifier">m</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><a href="#local-6989586621679072657"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Pipes.html#%3E~"><span class="hs-operator hs-var">&gt;~</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span>
</span><a name="line-200"></a><span class="hs-pragma">{-# INLINABLE [1] repeatM #-}</span><span>
</span><a name="line-201"></a><span>
</span><a name="line-202"></a><span class="hs-pragma">{-# RULES
  &quot;repeatM m &gt;-&gt; p&quot; forall m p . repeatM m &gt;-&gt; p = lift m &gt;~ p
  #-}</span><span>
</span><a name="line-205"></a><span>
</span><a name="line-206"></a><span class="hs-comment">{-| Repeat a monadic action a fixed number of times, 'yield'ing each result

&gt; replicateM  0      x = return ()
&gt;
&gt; replicateM (m + n) x = replicateM m x &gt;&gt; replicateM n x  -- 0 &lt;= {m,n}
-}</span><span>
</span><a name="line-212"></a><span class="hs-identifier">replicateM</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679072257"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679072257"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679072258"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer%27"><span class="hs-identifier hs-type">Producer'</span></a><span> </span><a href="#local-6989586621679072258"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679072257"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-213"></a><a name="replicateM"><a href="Pipes.Prelude.html#replicateM"><span class="hs-identifier">replicateM</span></a></a><span> </span><a name="local-6989586621679072658"><a href="#local-6989586621679072658"><span class="hs-identifier">n</span></a></a><span> </span><a name="local-6989586621679072659"><a href="#local-6989586621679072659"><span class="hs-identifier">m</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><a href="#local-6989586621679072659"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Pipes.html#%3E~"><span class="hs-operator hs-var">&gt;~</span></a><span> </span><a href="Pipes.Prelude.html#take"><span class="hs-identifier hs-var">take</span></a><span> </span><a href="#local-6989586621679072658"><span class="hs-identifier hs-var">n</span></a><span>
</span><a name="line-214"></a><span class="hs-pragma">{-# INLINABLE replicateM #-}</span><span>
</span><a name="line-215"></a><span>
</span><a name="line-216"></a><span class="hs-comment">{- $consumers
    Feed a 'Consumer' the same value repeatedly using ('&gt;~'):

&gt;&gt;&gt; runEffect $ lift getLine &gt;~ P.stdoutLn
Test&lt;Enter&gt;
Test
ABC&lt;Enter&gt;
ABC
...

-}</span><span>
</span><a name="line-227"></a><span>
</span><a name="line-228"></a><span class="hs-comment">{-| Write 'String's to 'IO.stdout' using 'putStrLn'

    Unlike 'toHandle', 'stdoutLn' gracefully terminates on a broken output pipe
-}</span><span>
</span><a name="line-232"></a><span class="hs-identifier">stdoutLn</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadIO</span><span> </span><a href="#local-6989586621679072256"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Consumer%27"><span class="hs-identifier hs-type">Consumer'</span></a><span> </span><span class="hs-identifier hs-type">String</span><span> </span><a href="#local-6989586621679072256"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-233"></a><a name="stdoutLn"><a href="Pipes.Prelude.html#stdoutLn"><span class="hs-identifier">stdoutLn</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679072660"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-234"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-235"></a><span>    </span><a name="local-6989586621679072660"><a href="#local-6989586621679072660"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-236"></a><span>        </span><a name="local-6989586621679072661"><a href="#local-6989586621679072661"><span class="hs-identifier">str</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#await"><span class="hs-identifier hs-var">await</span></a><span>
</span><a name="line-237"></a><span>        </span><a name="local-6989586621679072988"><a href="#local-6989586621679072988"><span class="hs-identifier">x</span></a></a><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">liftIO</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">try</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">putStrLn</span><span> </span><a href="#local-6989586621679072661"><span class="hs-identifier hs-var">str</span></a><span class="hs-special">)</span><span>
</span><a name="line-238"></a><span>        </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679072988"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-239"></a><span>           </span><span class="hs-identifier hs-var">Left</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">G</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">IOError</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">G</span><span class="hs-operator">.</span><span class="hs-identifier">ioe_type</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">G</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">ResourceVanished</span><span>
</span><a name="line-240"></a><span>                           </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">G</span><span class="hs-operator">.</span><span class="hs-identifier">ioe_errno</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679072989"><a href="#local-6989586621679072989"><span class="hs-identifier">ioe</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-241"></a><span>                </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">Errno</span><span> </span><a href="#local-6989586621679072989"><span class="hs-identifier hs-var">ioe</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-identifier hs-var">ePIPE</span><span>
</span><a name="line-242"></a><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-243"></a><span>           </span><span class="hs-identifier hs-var">Left</span><span>  </span><a name="local-6989586621679072990"><a href="#local-6989586621679072990"><span class="hs-identifier">e</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">liftIO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">throwIO</span><span> </span><a href="#local-6989586621679072990"><span class="hs-identifier hs-var">e</span></a><span class="hs-special">)</span><span>
</span><a name="line-244"></a><span>           </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679072660"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-245"></a><span class="hs-pragma">{-# INLINABLE stdoutLn #-}</span><span>
</span><a name="line-246"></a><span>
</span><a name="line-247"></a><span class="hs-comment">{-| Write 'String's to 'IO.stdout' using 'putStrLn'

    This does not handle a broken output pipe, but has a polymorphic return
    value
-}</span><span>
</span><a name="line-252"></a><span class="hs-identifier">stdoutLn'</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadIO</span><span> </span><a href="#local-6989586621679072254"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Consumer%27"><span class="hs-identifier hs-type">Consumer'</span></a><span> </span><span class="hs-identifier hs-type">String</span><span> </span><a href="#local-6989586621679072254"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679072255"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-253"></a><a name="stdoutLn%27"><a href="Pipes.Prelude.html#stdoutLn%27"><span class="hs-identifier">stdoutLn'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679073101"><a href="#local-6989586621679073101"><span class="hs-identifier">str</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">liftIO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">putStrLn</span><span> </span><a href="#local-6989586621679073101"><span class="hs-identifier hs-var">str</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-254"></a><span class="hs-pragma">{-# INLINABLE [1] stdoutLn' #-}</span><span>
</span><a name="line-255"></a><span>
</span><a name="line-256"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; stdoutLn'&quot; forall p .
        p &gt;-&gt; stdoutLn' = for p (\str -&gt; liftIO (putStrLn str))
  #-}</span><span>
</span><a name="line-260"></a><span>
</span><a name="line-261"></a><span class="hs-comment">-- | Consume all values using a monadic function</span><span>
</span><a name="line-262"></a><span class="hs-identifier">mapM_</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679072251"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679072252"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679072251"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Consumer%27"><span class="hs-identifier hs-type">Consumer'</span></a><span> </span><a href="#local-6989586621679072252"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679072251"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679072253"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-263"></a><a name="mapM_"><a href="Pipes.Prelude.html#mapM_"><span class="hs-identifier">mapM_</span></a></a><span> </span><a name="local-6989586621679073102"><a href="#local-6989586621679073102"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679073103"><a href="#local-6989586621679073103"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073102"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679073103"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-264"></a><span class="hs-pragma">{-# INLINABLE [1] mapM_ #-}</span><span>
</span><a name="line-265"></a><span>
</span><a name="line-266"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; mapM_ f&quot; forall p f .
        p &gt;-&gt; mapM_ f = for p (\a -&gt; lift (f a))
  #-}</span><span>
</span><a name="line-270"></a><span>
</span><a name="line-271"></a><span class="hs-comment">-- | 'print' values to 'IO.stdout'</span><span>
</span><a name="line-272"></a><span class="hs-identifier">print</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">MonadIO</span><span> </span><a href="#local-6989586621679072248"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><a href="#local-6989586621679072249"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Consumer%27"><span class="hs-identifier hs-type">Consumer'</span></a><span> </span><a href="#local-6989586621679072249"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679072248"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679072250"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-273"></a><a name="print"><a href="Pipes.Prelude.html#print"><span class="hs-identifier">print</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679073104"><a href="#local-6989586621679073104"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">liftIO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Prelude</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">print</span><span> </span><a href="#local-6989586621679073104"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-274"></a><span class="hs-pragma">{-# INLINABLE [1] print #-}</span><span>
</span><a name="line-275"></a><span>
</span><a name="line-276"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; print&quot; forall p .
        p &gt;-&gt; print = for p (\a -&gt; liftIO (Prelude.print a))
  #-}</span><span>
</span><a name="line-280"></a><span>
</span><a name="line-281"></a><span class="hs-comment">-- | Write 'String's to a 'IO.Handle' using 'IO.hPutStrLn'</span><span>
</span><a name="line-282"></a><span class="hs-identifier">toHandle</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadIO</span><span> </span><a href="#local-6989586621679071811"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">Handle</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Consumer%27"><span class="hs-identifier hs-type">Consumer'</span></a><span> </span><span class="hs-identifier hs-type">String</span><span> </span><a href="#local-6989586621679071811"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071812"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-283"></a><a name="toHandle"><a href="Pipes.Prelude.html#toHandle"><span class="hs-identifier">toHandle</span></a></a><span> </span><a name="local-6989586621679073105"><a href="#local-6989586621679073105"><span class="hs-identifier">handle</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679073106"><a href="#local-6989586621679073106"><span class="hs-identifier">str</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">liftIO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">IO</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">hPutStrLn</span><span> </span><a href="#local-6989586621679073105"><span class="hs-identifier hs-var">handle</span></a><span> </span><a href="#local-6989586621679073106"><span class="hs-identifier hs-var">str</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-284"></a><span class="hs-pragma">{-# INLINABLE [1] toHandle #-}</span><span>
</span><a name="line-285"></a><span>
</span><a name="line-286"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; toHandle handle&quot; forall p handle .
        p &gt;-&gt; toHandle handle = for p (\str -&gt; liftIO (IO.hPutStrLn handle str))
  #-}</span><span>
</span><a name="line-290"></a><span>
</span><a name="line-291"></a><span class="hs-comment">-- | 'discard' all incoming values</span><span>
</span><a name="line-292"></a><span class="hs-identifier">drain</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071808"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Consumer%27"><span class="hs-identifier hs-type">Consumer'</span></a><span> </span><a href="#local-6989586621679071809"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071808"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071810"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-293"></a><a name="drain"><a href="Pipes.Prelude.html#drain"><span class="hs-identifier">drain</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><a href="Pipes.html#discard"><span class="hs-identifier hs-var">discard</span></a><span>
</span><a name="line-294"></a><span class="hs-pragma">{-# INLINABLE [1] drain #-}</span><span>
</span><a name="line-295"></a><span>
</span><a name="line-296"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; drain&quot; forall p .
        p &gt;-&gt; drain = for p discard
  #-}</span><span>
</span><a name="line-300"></a><span>
</span><a name="line-301"></a><span class="hs-comment">{- $pipes
    Use ('&gt;-&gt;') to connect 'Producer's, 'Pipe's, and 'Consumer's:

&gt;&gt;&gt; runEffect $ P.stdinLn &gt;-&gt; P.takeWhile (/= &quot;quit&quot;) &gt;-&gt; P.stdoutLn
Test&lt;Enter&gt;
Test
ABC&lt;Enter&gt;
ABC
quit&lt;Enter&gt;
&gt;&gt;&gt;

-}</span><span>
</span><a name="line-313"></a><span>
</span><a name="line-314"></a><span class="hs-comment">{-| Apply a function to all values flowing downstream

&gt; map id = cat
&gt;
&gt; map (g . f) = map f &gt;-&gt; map g
-}</span><span>
</span><a name="line-320"></a><span class="hs-identifier">map</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071804"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071805"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071806"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071805"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071806"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679071804"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071807"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-321"></a><a name="map"><a href="Pipes.Prelude.html#map"><span class="hs-identifier">map</span></a></a><span> </span><a name="local-6989586621679073107"><a href="#local-6989586621679073107"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679073108"><a href="#local-6989586621679073108"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073107"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679073108"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-322"></a><span class="hs-pragma">{-# INLINABLE [1] map #-}</span><span>
</span><a name="line-323"></a><span>
</span><a name="line-324"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; map f&quot; forall p f . p &gt;-&gt; map f = for p (\a -&gt; yield (f a))

  ; &quot;map f &gt;-&gt; p&quot; forall p f . map f &gt;-&gt; p = (do
        a &lt;- await
        return (f a) ) &gt;~ p
  #-}</span><span>
</span><a name="line-331"></a><span>
</span><a name="line-332"></a><span class="hs-comment">{-| Apply a monadic function to all values flowing downstream

&gt; mapM return = cat
&gt;
&gt; mapM (f &gt;=&gt; g) = mapM f &gt;-&gt; mapM g
-}</span><span>
</span><a name="line-338"></a><span class="hs-identifier">mapM</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071800"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071801"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071800"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071802"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071801"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071802"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679071800"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071803"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-339"></a><a name="mapM"><a href="Pipes.Prelude.html#mapM"><span class="hs-identifier">mapM</span></a></a><span> </span><a name="local-6989586621679073109"><a href="#local-6989586621679073109"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679073110"><a href="#local-6989586621679073110"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-340"></a><span>    </span><a name="local-6989586621679073111"><a href="#local-6989586621679073111"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073109"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679073110"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-341"></a><span>    </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073111"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-342"></a><span class="hs-pragma">{-# INLINABLE [1] mapM #-}</span><span>
</span><a name="line-343"></a><span>
</span><a name="line-344"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; mapM f&quot; forall p f . p &gt;-&gt; mapM f = for p (\a -&gt; do
        b &lt;- lift (f a)
        yield b )

  ; &quot;mapM f &gt;-&gt; p&quot; forall p f . mapM f &gt;-&gt; p = (do
        a &lt;- await
        b &lt;- lift (f a)
        return b ) &gt;~ p
  #-}</span><span>
</span><a name="line-354"></a><span>
</span><a name="line-355"></a><span class="hs-comment">-- | Convert a stream of actions to a stream of values</span><span>
</span><a name="line-356"></a><span class="hs-identifier">sequence</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071797"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071797"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071798"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679071798"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071797"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071799"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-357"></a><a name="sequence"><a href="Pipes.Prelude.html#sequence"><span class="hs-identifier">sequence</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-358"></a><span class="hs-pragma">{-# INLINABLE sequence #-}</span><span>
</span><a name="line-359"></a><span>
</span><a name="line-360"></a><span class="hs-comment">{- | Apply a function to all values flowing downstream, and
     forward each element of the result.
-}</span><span>
</span><a name="line-363"></a><span class="hs-identifier">mapFoldable</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071792"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Foldable</span><span> </span><a href="#local-6989586621679071793"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071794"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071793"><span class="hs-identifier hs-type">t</span></a><span> </span><a href="#local-6989586621679071795"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071794"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071795"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679071792"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071796"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-364"></a><a name="mapFoldable"><a href="Pipes.Prelude.html#mapFoldable"><span class="hs-identifier">mapFoldable</span></a></a><span> </span><a name="local-6989586621679073112"><a href="#local-6989586621679073112"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679073113"><a href="#local-6989586621679073113"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.html#each"><span class="hs-identifier hs-var">each</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073112"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679073113"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-365"></a><span class="hs-pragma">{-# INLINABLE [1] mapFoldable #-}</span><span>
</span><a name="line-366"></a><span>
</span><a name="line-367"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; mapFoldable f&quot; forall p f .
        p &gt;-&gt; mapFoldable f = for p (\a -&gt; each (f a))
  #-}</span><span>
</span><a name="line-371"></a><span>
</span><a name="line-372"></a><span class="hs-comment">{-| @(filter predicate)@ only forwards values that satisfy the predicate.

&gt; filter (pure True) = cat
&gt;
&gt; filter (liftA2 (&amp;&amp;) p1 p2) = filter p1 &gt;-&gt; filter p2
-}</span><span>
</span><a name="line-378"></a><span class="hs-identifier">filter</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071789"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071790"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071790"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071790"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071789"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071791"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-379"></a><a name="filter"><a href="Pipes.Prelude.html#filter"><span class="hs-identifier">filter</span></a></a><span> </span><a name="local-6989586621679073114"><a href="#local-6989586621679073114"><span class="hs-identifier">predicate</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679073115"><a href="#local-6989586621679073115"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">when</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073114"><span class="hs-identifier hs-var">predicate</span></a><span> </span><a href="#local-6989586621679073115"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073115"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-380"></a><span class="hs-pragma">{-# INLINABLE [1] filter #-}</span><span>
</span><a name="line-381"></a><span>
</span><a name="line-382"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; filter predicate&quot; forall p predicate.
        p &gt;-&gt; filter predicate = for p (\a -&gt; when (predicate a) (yield a))
  #-}</span><span>
</span><a name="line-386"></a><span>
</span><a name="line-387"></a><span class="hs-comment">{-| @(filterM predicate)@ only forwards values that satisfy the monadic
    predicate

&gt; filterM (pure (pure True)) = cat
&gt;
&gt; filterM (liftA2 (liftA2 (&amp;&amp;)) p1 p2) = filterM p1 &gt;-&gt; filterM p2
-}</span><span>
</span><a name="line-394"></a><span class="hs-identifier">filterM</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071786"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071787"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071786"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071787"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071787"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071786"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071788"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-395"></a><a name="filterM"><a href="Pipes.Prelude.html#filterM"><span class="hs-identifier">filterM</span></a></a><span> </span><a name="local-6989586621679073116"><a href="#local-6989586621679073116"><span class="hs-identifier">predicate</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679073117"><a href="#local-6989586621679073117"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-396"></a><span>    </span><a name="local-6989586621679073118"><a href="#local-6989586621679073118"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073116"><span class="hs-identifier hs-var">predicate</span></a><span> </span><a href="#local-6989586621679073117"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-397"></a><span>    </span><span class="hs-identifier hs-var">when</span><span> </span><a href="#local-6989586621679073118"><span class="hs-identifier hs-var">b</span></a><span> </span><span class="hs-special">(</span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073117"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-398"></a><span class="hs-pragma">{-# INLINABLE [1] filterM #-}</span><span>
</span><a name="line-399"></a><span>
</span><a name="line-400"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; filterM predicate&quot; forall p predicate .
        p &gt;-&gt; filterM predicate = for p (\a -&gt; do
            b &lt;- lift (predicate a)
            when b (yield a) )
  #-}</span><span>
</span><a name="line-406"></a><span>
</span><a name="line-407"></a><span class="hs-comment">{-| @(take n)@ only allows @n@ values to pass through

&gt; take 0 = return ()
&gt;
&gt; take (m + n) = take m &gt;&gt; take n

&gt; take &lt;infinity&gt; = cat
&gt;
&gt; take (min m n) = take m &gt;-&gt; take n
-}</span><span>
</span><a name="line-417"></a><span class="hs-identifier">take</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071784"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071785"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071785"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071784"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-418"></a><a name="take"><a href="Pipes.Prelude.html#take"><span class="hs-identifier">take</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073119"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-419"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-420"></a><span>    </span><a name="local-6989586621679073119"><a href="#local-6989586621679073119"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-number">0</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span>
</span><a name="line-421"></a><span>    </span><span class="hs-identifier">go</span><span> </span><a name="local-6989586621679073120"><a href="#local-6989586621679073120"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span>
</span><a name="line-422"></a><span>        </span><a name="local-6989586621679073121"><a href="#local-6989586621679073121"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#await"><span class="hs-identifier hs-var">await</span></a><span>
</span><a name="line-423"></a><span>        </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073121"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-424"></a><span>        </span><a href="#local-6989586621679073119"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073120"><span class="hs-identifier hs-var">n</span></a><span class="hs-glyph">-</span><span class="hs-number">1</span><span class="hs-special">)</span><span>
</span><a name="line-425"></a><span class="hs-pragma">{-# INLINABLE take #-}</span><span>
</span><a name="line-426"></a><span>
</span><a name="line-427"></a><span class="hs-comment">{-| @(takeWhile p)@ allows values to pass downstream so long as they satisfy
    the predicate @p@.

&gt; takeWhile (pure True) = cat
&gt;
&gt; takeWhile (liftA2 (&amp;&amp;) p1 p2) = takeWhile p1 &gt;-&gt; takeWhile p2
-}</span><span>
</span><a name="line-434"></a><span class="hs-identifier">takeWhile</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071782"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071783"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071783"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071783"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071782"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-435"></a><a name="takeWhile"><a href="Pipes.Prelude.html#takeWhile"><span class="hs-identifier">takeWhile</span></a></a><span> </span><a name="local-6989586621679073122"><a href="#local-6989586621679073122"><span class="hs-identifier">predicate</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073123"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-436"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-437"></a><span>    </span><a name="local-6989586621679073123"><a href="#local-6989586621679073123"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-438"></a><span>        </span><a name="local-6989586621679073124"><a href="#local-6989586621679073124"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#await"><span class="hs-identifier hs-var">await</span></a><span>
</span><a name="line-439"></a><span>        </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073122"><span class="hs-identifier hs-var">predicate</span></a><span> </span><a href="#local-6989586621679073124"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-440"></a><span>            </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-441"></a><span>                </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073124"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-442"></a><span>                </span><a href="#local-6989586621679073123"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-443"></a><span>            </span><span class="hs-keyword">else</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-444"></a><span class="hs-pragma">{-# INLINABLE takeWhile #-}</span><span>
</span><a name="line-445"></a><span>
</span><a name="line-446"></a><span class="hs-comment">{-| @(takeWhile' p)@ is a version of takeWhile that returns the value failing
    the predicate.

&gt; takeWhile' (pure True) = cat
&gt;
&gt; takeWhile' (liftA2 (&amp;&amp;) p1 p2) = takeWhile' p1 &gt;-&gt; takeWhile' p2
-}</span><span>
</span><a name="line-453"></a><span class="hs-identifier">takeWhile'</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071780"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071781"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071781"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071781"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071780"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071781"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-454"></a><a name="takeWhile%27"><a href="Pipes.Prelude.html#takeWhile%27"><span class="hs-identifier">takeWhile'</span></a></a><span> </span><a name="local-6989586621679073125"><a href="#local-6989586621679073125"><span class="hs-identifier">predicate</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073126"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-455"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-456"></a><span>    </span><a name="local-6989586621679073126"><a href="#local-6989586621679073126"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-457"></a><span>        </span><a name="local-6989586621679073127"><a href="#local-6989586621679073127"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#await"><span class="hs-identifier hs-var">await</span></a><span>
</span><a name="line-458"></a><span>        </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073125"><span class="hs-identifier hs-var">predicate</span></a><span> </span><a href="#local-6989586621679073127"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-459"></a><span>            </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-460"></a><span>                </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073127"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-461"></a><span>                </span><a href="#local-6989586621679073126"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-462"></a><span>            </span><span class="hs-keyword">else</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679073127"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-463"></a><span class="hs-pragma">{-# INLINABLE takeWhile' #-}</span><span>
</span><a name="line-464"></a><span>
</span><a name="line-465"></a><span class="hs-comment">{-| @(drop n)@ discards @n@ values going downstream

&gt; drop 0 = cat
&gt;
&gt; drop (m + n) = drop m &gt;-&gt; drop n
-}</span><span>
</span><a name="line-471"></a><span class="hs-identifier">drop</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071777"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071778"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071778"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071777"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071779"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-472"></a><a name="drop"><a href="Pipes.Prelude.html#drop"><span class="hs-identifier">drop</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073128"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-473"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-474"></a><span>    </span><a name="local-6989586621679073128"><a href="#local-6989586621679073128"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-number">0</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span>
</span><a name="line-475"></a><span>    </span><span class="hs-identifier">go</span><span> </span><a name="local-6989586621679073129"><a href="#local-6989586621679073129"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-glyph">=</span><span>  </span><span class="hs-keyword">do</span><span>
</span><a name="line-476"></a><span>        </span><a href="Pipes.html#await"><span class="hs-identifier hs-var">await</span></a><span>
</span><a name="line-477"></a><span>        </span><a href="#local-6989586621679073128"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073129"><span class="hs-identifier hs-var">n</span></a><span class="hs-glyph">-</span><span class="hs-number">1</span><span class="hs-special">)</span><span>
</span><a name="line-478"></a><span class="hs-pragma">{-# INLINABLE drop #-}</span><span>
</span><a name="line-479"></a><span>
</span><a name="line-480"></a><span class="hs-comment">{-| @(dropWhile p)@ discards values going downstream until one violates the
    predicate @p@.

&gt; dropWhile (pure False) = cat
&gt;
&gt; dropWhile (liftA2 (||) p1 p2) = dropWhile p1 &gt;-&gt; dropWhile p2
-}</span><span>
</span><a name="line-487"></a><span class="hs-identifier">dropWhile</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071774"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071775"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071775"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071775"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071774"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071776"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-488"></a><a name="dropWhile"><a href="Pipes.Prelude.html#dropWhile"><span class="hs-identifier">dropWhile</span></a></a><span> </span><a name="local-6989586621679073130"><a href="#local-6989586621679073130"><span class="hs-identifier">predicate</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073131"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-489"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-490"></a><span>    </span><a name="local-6989586621679073131"><a href="#local-6989586621679073131"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-491"></a><span>        </span><a name="local-6989586621679073132"><a href="#local-6989586621679073132"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#await"><span class="hs-identifier hs-var">await</span></a><span>
</span><a name="line-492"></a><span>        </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073130"><span class="hs-identifier hs-var">predicate</span></a><span> </span><a href="#local-6989586621679073132"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-493"></a><span>            </span><span class="hs-keyword">then</span><span> </span><a href="#local-6989586621679073131"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-494"></a><span>            </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-495"></a><span>                </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073132"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-496"></a><span>                </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span>
</span><a name="line-497"></a><span class="hs-pragma">{-# INLINABLE dropWhile #-}</span><span>
</span><a name="line-498"></a><span>
</span><a name="line-499"></a><span class="hs-comment">-- | Flatten all 'Foldable' elements flowing downstream</span><span>
</span><a name="line-500"></a><span class="hs-identifier">concat</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071770"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Foldable</span><span> </span><a href="#local-6989586621679071771"><span class="hs-identifier hs-type">f</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071771"><span class="hs-identifier hs-type">f</span></a><span> </span><a href="#local-6989586621679071772"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679071772"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071770"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071773"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-501"></a><a name="concat"><a href="Pipes.Prelude.html#concat"><span class="hs-identifier">concat</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><a href="Pipes.html#each"><span class="hs-identifier hs-var">each</span></a><span>
</span><a name="line-502"></a><span class="hs-pragma">{-# INLINABLE [1] concat #-}</span><span>
</span><a name="line-503"></a><span>
</span><a name="line-504"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; concat&quot; forall p . p &gt;-&gt; concat = for p each
  #-}</span><span>
</span><a name="line-507"></a><span>
</span><a name="line-508"></a><span class="hs-comment">-- | Outputs the indices of all elements that match the given element</span><span>
</span><a name="line-509"></a><span class="hs-identifier">elemIndices</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071767"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><a href="#local-6989586621679071768"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679071768"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071768"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><a href="#local-6989586621679071767"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071769"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-510"></a><a name="elemIndices"><a href="Pipes.Prelude.html#elemIndices"><span class="hs-identifier">elemIndices</span></a></a><span> </span><a name="local-6989586621679073133"><a href="#local-6989586621679073133"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#findIndices"><span class="hs-identifier hs-var">findIndices</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073133"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">==</span><span class="hs-special">)</span><span>
</span><a name="line-511"></a><span class="hs-pragma">{-# INLINABLE elemIndices #-}</span><span>
</span><a name="line-512"></a><span>
</span><a name="line-513"></a><span class="hs-comment">-- | Outputs the indices of all elements that satisfied the predicate</span><span>
</span><a name="line-514"></a><span class="hs-identifier">findIndices</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071764"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071765"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071765"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><a href="#local-6989586621679071764"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071766"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-515"></a><a name="findIndices"><a href="Pipes.Prelude.html#findIndices"><span class="hs-identifier">findIndices</span></a></a><span> </span><a name="local-6989586621679073134"><a href="#local-6989586621679073134"><span class="hs-identifier">predicate</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073135"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-number">0</span><span>
</span><a name="line-516"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-517"></a><span>    </span><a name="local-6989586621679073135"><a href="#local-6989586621679073135"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073136"><a href="#local-6989586621679073136"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-518"></a><span>        </span><a name="local-6989586621679073137"><a href="#local-6989586621679073137"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#await"><span class="hs-identifier hs-var">await</span></a><span>
</span><a name="line-519"></a><span>        </span><span class="hs-identifier hs-var">when</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073134"><span class="hs-identifier hs-var">predicate</span></a><span> </span><a href="#local-6989586621679073137"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073136"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span>
</span><a name="line-520"></a><span>        </span><a href="#local-6989586621679073135"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-operator hs-var">$!</span><span> </span><a href="#local-6989586621679073136"><span class="hs-identifier hs-var">n</span></a><span> </span><span class="hs-operator hs-var">+</span><span> </span><span class="hs-number">1</span><span>
</span><a name="line-521"></a><span class="hs-pragma">{-# INLINABLE findIndices #-}</span><span>
</span><a name="line-522"></a><span>
</span><a name="line-523"></a><span class="hs-comment">{-| Strict left scan

&gt; Control.Foldl.purely scan :: Monad m =&gt; Fold a b -&gt; Pipe a b m r
-}</span><span>
</span><a name="line-527"></a><span class="hs-identifier">scan</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071759"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071760"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071761"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071760"><span class="hs-identifier hs-type">x</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071760"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071760"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071762"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071761"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071762"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679071759"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071763"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-528"></a><a name="scan"><a href="Pipes.Prelude.html#scan"><span class="hs-identifier">scan</span></a></a><span> </span><a name="local-6989586621679073138"><a href="#local-6989586621679073138"><span class="hs-identifier">step</span></a></a><span> </span><a name="local-6989586621679073139"><a href="#local-6989586621679073139"><span class="hs-identifier">begin</span></a></a><span> </span><a name="local-6989586621679073140"><a href="#local-6989586621679073140"><span class="hs-identifier">done</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073141"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073139"><span class="hs-identifier hs-var">begin</span></a><span>
</span><a name="line-529"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-530"></a><span>    </span><a name="local-6989586621679073141"><a href="#local-6989586621679073141"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073142"><a href="#local-6989586621679073142"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-531"></a><span>        </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073140"><span class="hs-identifier hs-var">done</span></a><span> </span><a href="#local-6989586621679073142"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-532"></a><span>        </span><a name="local-6989586621679073143"><a href="#local-6989586621679073143"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#await"><span class="hs-identifier hs-var">await</span></a><span>
</span><a name="line-533"></a><span>        </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679073144"><a href="#local-6989586621679073144"><span class="hs-identifier">x'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073138"><span class="hs-identifier hs-var">step</span></a><span> </span><a href="#local-6989586621679073142"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="#local-6989586621679073143"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-534"></a><span>        </span><a href="#local-6989586621679073141"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-operator hs-var">$!</span><span> </span><a href="#local-6989586621679073144"><span class="hs-identifier hs-var">x'</span></a><span>
</span><a name="line-535"></a><span class="hs-pragma">{-# INLINABLE scan #-}</span><span>
</span><a name="line-536"></a><span>
</span><a name="line-537"></a><span class="hs-comment">{-| Strict, monadic left scan

&gt; Control.Foldl.impurely scan :: Monad m =&gt; FoldM a m b -&gt; Pipe a b m r
-}</span><span>
</span><a name="line-541"></a><span class="hs-identifier">scanM</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071754"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071755"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071756"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071754"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071755"><span class="hs-identifier hs-type">x</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071754"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071755"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071755"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071754"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071757"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071756"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071757"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679071754"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071758"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-542"></a><a name="scanM"><a href="Pipes.Prelude.html#scanM"><span class="hs-identifier">scanM</span></a></a><span> </span><a name="local-6989586621679073145"><a href="#local-6989586621679073145"><span class="hs-identifier">step</span></a></a><span> </span><a name="local-6989586621679073146"><a href="#local-6989586621679073146"><span class="hs-identifier">begin</span></a></a><span> </span><a name="local-6989586621679073147"><a href="#local-6989586621679073147"><span class="hs-identifier">done</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-543"></a><span>    </span><a name="local-6989586621679073153"><a href="#local-6989586621679073153"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><a href="#local-6989586621679073146"><span class="hs-identifier hs-var">begin</span></a><span>
</span><a name="line-544"></a><span>    </span><a href="#local-6989586621679073148"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073153"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-545"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-546"></a><span>    </span><a name="local-6989586621679073148"><a href="#local-6989586621679073148"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073149"><a href="#local-6989586621679073149"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-547"></a><span>        </span><a name="local-6989586621679073150"><a href="#local-6989586621679073150"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073147"><span class="hs-identifier hs-var">done</span></a><span> </span><a href="#local-6989586621679073149"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-548"></a><span>        </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073150"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-549"></a><span>        </span><a name="local-6989586621679073151"><a href="#local-6989586621679073151"><span class="hs-identifier">a</span></a></a><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#await"><span class="hs-identifier hs-var">await</span></a><span>
</span><a name="line-550"></a><span>        </span><a name="local-6989586621679073152"><a href="#local-6989586621679073152"><span class="hs-identifier">x'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073145"><span class="hs-identifier hs-var">step</span></a><span> </span><a href="#local-6989586621679073149"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="#local-6989586621679073151"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-551"></a><span>        </span><a href="#local-6989586621679073148"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-operator hs-var">$!</span><span> </span><a href="#local-6989586621679073152"><span class="hs-identifier hs-var">x'</span></a><span>
</span><a name="line-552"></a><span class="hs-pragma">{-# INLINABLE scanM #-}</span><span>
</span><a name="line-553"></a><span>
</span><a name="line-554"></a><span class="hs-comment">{-| Apply an action to all values flowing downstream

&gt; chain (pure (return ())) = cat
&gt;
&gt; chain (liftA2 (&gt;&gt;) m1 m2) = chain m1 &gt;-&gt; chain m2
-}</span><span>
</span><a name="line-560"></a><span class="hs-identifier">chain</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071751"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071752"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071751"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071752"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071752"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071751"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071753"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-561"></a><a name="chain"><a href="Pipes.Prelude.html#chain"><span class="hs-identifier">chain</span></a></a><span> </span><a name="local-6989586621679073154"><a href="#local-6989586621679073154"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679073155"><a href="#local-6989586621679073155"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-562"></a><span>    </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073154"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679073155"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-563"></a><span>    </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073155"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-564"></a><span class="hs-pragma">{-# INLINABLE [1] chain #-}</span><span>
</span><a name="line-565"></a><span>
</span><a name="line-566"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; chain f&quot; forall p f .
        p &gt;-&gt; chain f = for p (\a -&gt; do
            lift (f a)
            yield a )
  ; &quot;chain f &gt;-&gt; p&quot; forall p f .
        chain f &gt;-&gt; p = (do
            a &lt;- await
            lift (f a)
            return a ) &gt;~ p
  #-}</span><span>
</span><a name="line-577"></a><span>
</span><a name="line-578"></a><span class="hs-comment">-- | Parse 'Read'able values, only forwarding the value if the parse succeeds</span><span>
</span><a name="line-579"></a><span class="hs-identifier">read</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071075"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Read</span><span> </span><a href="#local-6989586621679071076"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><span class="hs-identifier hs-type">String</span><span> </span><a href="#local-6989586621679071076"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071075"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071077"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-580"></a><a name="read"><a href="Pipes.Prelude.html#read"><span class="hs-identifier">read</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679073156"><a href="#local-6989586621679073156"><span class="hs-identifier">str</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">reads</span><span> </span><a href="#local-6989586621679073156"><span class="hs-identifier hs-var">str</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-581"></a><span>    </span><span class="hs-special">[</span><span class="hs-special">(</span><a name="local-6989586621679073179"><a href="#local-6989586621679073179"><span class="hs-identifier">a</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;&quot;</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073179"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-582"></a><span>    </span><span class="hs-identifier">_</span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-583"></a><span class="hs-pragma">{-# INLINABLE [1] read #-}</span><span>
</span><a name="line-584"></a><span>
</span><a name="line-585"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; read&quot; forall p .
        p &gt;-&gt; read = for p (\str -&gt; case (reads str) of
            [(a, &quot;&quot;)] -&gt; yield a
            _         -&gt; return () )
  #-}</span><span>
</span><a name="line-591"></a><span>
</span><a name="line-592"></a><span class="hs-comment">-- | Convert 'Show'able values to 'String's</span><span>
</span><a name="line-593"></a><span class="hs-identifier">show</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071072"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><a href="#local-6989586621679071073"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071073"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-identifier hs-type">String</span><span> </span><a href="#local-6989586621679071072"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071074"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-594"></a><a name="show"><a href="Pipes.Prelude.html#show"><span class="hs-identifier">show</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><span class="hs-identifier hs-var">Prelude</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">show</span><span>
</span><a name="line-595"></a><span class="hs-pragma">{-# INLINABLE show #-}</span><span>
</span><a name="line-596"></a><span>
</span><a name="line-597"></a><span class="hs-comment">-- | Evaluate all values flowing downstream to WHNF</span><span>
</span><a name="line-598"></a><span class="hs-identifier">seq</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071069"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071070"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071070"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071069"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071071"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-599"></a><a name="seq"><a href="Pipes.Prelude.html#seq"><span class="hs-identifier">seq</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679073180"><a href="#local-6989586621679073180"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><span class="hs-operator hs-var">$!</span><span> </span><a href="#local-6989586621679073180"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-600"></a><span class="hs-pragma">{-# INLINABLE seq #-}</span><span>
</span><a name="line-601"></a><span>
</span><a name="line-602"></a><span class="hs-comment">{-| Create a `Pipe` from a `ListT` transformation

&gt; loop (k1 &gt;=&gt; k2) = loop k1 &gt;-&gt; loop k2
&gt;
&gt; loop return = cat
-}</span><span>
</span><a name="line-608"></a><span class="hs-identifier">loop</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071065"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071066"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.html#ListT"><span class="hs-identifier hs-type">ListT</span></a><span> </span><a href="#local-6989586621679071065"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071067"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071066"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071067"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679071065"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071068"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-609"></a><a name="loop"><a href="Pipes.Prelude.html#loop"><span class="hs-identifier">loop</span></a></a><span> </span><a name="local-6989586621679073181"><a href="#local-6989586621679073181"><span class="hs-identifier">k</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-special">(</span><a href="Pipes.html#every"><span class="hs-identifier hs-var">every</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="#local-6989586621679073181"><span class="hs-identifier hs-var">k</span></a><span class="hs-special">)</span><span>
</span><a name="line-610"></a><span class="hs-pragma">{-# INLINABLE loop #-}</span><span>
</span><a name="line-611"></a><span>
</span><a name="line-612"></a><span class="hs-comment">{- $folds
    Use these to fold the output of a 'Producer'.  Many of these folds will stop
    drawing elements if they can compute their result early, like 'any':

&gt;&gt;&gt; P.any Prelude.null P.stdinLn
Test&lt;Enter&gt;
ABC&lt;Enter&gt;
&lt;Enter&gt;
True
&gt;&gt;&gt;

-}</span><span>
</span><a name="line-624"></a><span>
</span><a name="line-625"></a><span class="hs-comment">{-| Strict fold of the elements of a 'Producer'

&gt; Control.Foldl.purely fold :: Monad m =&gt; Fold a b -&gt; Producer a m () -&gt; m b
-}</span><span>
</span><a name="line-629"></a><span class="hs-identifier">fold</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071061"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071062"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071063"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071062"><span class="hs-identifier hs-type">x</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071062"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071062"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071064"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071063"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071061"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071061"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071064"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-630"></a><a name="fold"><a href="Pipes.Prelude.html#fold"><span class="hs-identifier">fold</span></a></a><span> </span><a name="local-6989586621679073182"><a href="#local-6989586621679073182"><span class="hs-identifier">step</span></a></a><span> </span><a name="local-6989586621679073183"><a href="#local-6989586621679073183"><span class="hs-identifier">begin</span></a></a><span> </span><a name="local-6989586621679073184"><a href="#local-6989586621679073184"><span class="hs-identifier">done</span></a></a><span> </span><a name="local-6989586621679073185"><a href="#local-6989586621679073185"><span class="hs-identifier">p0</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073186"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073185"><span class="hs-identifier hs-var">p0</span></a><span> </span><a href="#local-6989586621679073183"><span class="hs-identifier hs-var">begin</span></a><span>
</span><a name="line-631"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-632"></a><span>    </span><a name="local-6989586621679073186"><a href="#local-6989586621679073186"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073187"><a href="#local-6989586621679073187"><span class="hs-identifier">p</span></a></a><span> </span><a name="local-6989586621679073188"><a href="#local-6989586621679073188"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073187"><span class="hs-identifier hs-var">p</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-633"></a><span>        </span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a><span> </span><a name="local-6989586621679073189"><a href="#local-6989586621679073189"><span class="hs-identifier">v</span></a></a><span>  </span><span class="hs-identifier">_</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Internal.html#closed"><span class="hs-identifier hs-var">closed</span></a><span> </span><a href="#local-6989586621679073189"><span class="hs-identifier hs-var">v</span></a><span>
</span><a name="line-634"></a><span>        </span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a><span> </span><a name="local-6989586621679073190"><a href="#local-6989586621679073190"><span class="hs-identifier">a</span></a></a><span>  </span><a name="local-6989586621679073191"><a href="#local-6989586621679073191"><span class="hs-identifier">fu</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073186"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073191"><span class="hs-identifier hs-var">fu</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$!</span><span> </span><a href="#local-6989586621679073182"><span class="hs-identifier hs-var">step</span></a><span> </span><a href="#local-6989586621679073188"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="#local-6989586621679073190"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-635"></a><span>        </span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a><span>          </span><a name="local-6989586621679073192"><a href="#local-6989586621679073192"><span class="hs-identifier">m</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073192"><span class="hs-identifier hs-var">m</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679073193"><a href="#local-6989586621679073193"><span class="hs-identifier">p'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073186"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073193"><span class="hs-identifier hs-var">p'</span></a><span> </span><a href="#local-6989586621679073188"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-636"></a><span>        </span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a><span>    </span><span class="hs-identifier">_</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073184"><span class="hs-identifier hs-var">done</span></a><span> </span><a href="#local-6989586621679073188"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-637"></a><span class="hs-pragma">{-# INLINABLE fold #-}</span><span>
</span><a name="line-638"></a><span>
</span><a name="line-639"></a><span class="hs-comment">{-| Strict fold of the elements of a 'Producer' that preserves the return value

&gt; Control.Foldl.purely fold' :: Monad m =&gt; Fold a b -&gt; Producer a m r -&gt; m (b, r)
-}</span><span>
</span><a name="line-643"></a><span class="hs-identifier">fold'</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071056"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071057"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071058"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071057"><span class="hs-identifier hs-type">x</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071057"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071057"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071059"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071058"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071056"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071060"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071056"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071059"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679071060"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-644"></a><a name="fold%27"><a href="Pipes.Prelude.html#fold%27"><span class="hs-identifier">fold'</span></a></a><span> </span><a name="local-6989586621679073194"><a href="#local-6989586621679073194"><span class="hs-identifier">step</span></a></a><span> </span><a name="local-6989586621679073195"><a href="#local-6989586621679073195"><span class="hs-identifier">begin</span></a></a><span> </span><a name="local-6989586621679073196"><a href="#local-6989586621679073196"><span class="hs-identifier">done</span></a></a><span> </span><a name="local-6989586621679073197"><a href="#local-6989586621679073197"><span class="hs-identifier">p0</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073198"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073197"><span class="hs-identifier hs-var">p0</span></a><span> </span><a href="#local-6989586621679073195"><span class="hs-identifier hs-var">begin</span></a><span>
</span><a name="line-645"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-646"></a><span>    </span><a name="local-6989586621679073198"><a href="#local-6989586621679073198"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073199"><a href="#local-6989586621679073199"><span class="hs-identifier">p</span></a></a><span> </span><a name="local-6989586621679073200"><a href="#local-6989586621679073200"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073199"><span class="hs-identifier hs-var">p</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-647"></a><span>        </span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a><span> </span><a name="local-6989586621679073201"><a href="#local-6989586621679073201"><span class="hs-identifier">v</span></a></a><span>  </span><span class="hs-identifier">_</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Internal.html#closed"><span class="hs-identifier hs-var">closed</span></a><span> </span><a href="#local-6989586621679073201"><span class="hs-identifier hs-var">v</span></a><span>
</span><a name="line-648"></a><span>        </span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a><span> </span><a name="local-6989586621679073202"><a href="#local-6989586621679073202"><span class="hs-identifier">a</span></a></a><span>  </span><a name="local-6989586621679073203"><a href="#local-6989586621679073203"><span class="hs-identifier">fu</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073198"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073203"><span class="hs-identifier hs-var">fu</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$!</span><span> </span><a href="#local-6989586621679073194"><span class="hs-identifier hs-var">step</span></a><span> </span><a href="#local-6989586621679073200"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="#local-6989586621679073202"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-649"></a><span>        </span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a><span>          </span><a name="local-6989586621679073204"><a href="#local-6989586621679073204"><span class="hs-identifier">m</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073204"><span class="hs-identifier hs-var">m</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679073205"><a href="#local-6989586621679073205"><span class="hs-identifier">p'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073198"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073205"><span class="hs-identifier hs-var">p'</span></a><span> </span><a href="#local-6989586621679073200"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-650"></a><span>        </span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a><span>    </span><a name="local-6989586621679073206"><a href="#local-6989586621679073206"><span class="hs-identifier">r</span></a></a><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073196"><span class="hs-identifier hs-var">done</span></a><span> </span><a href="#local-6989586621679073200"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679073206"><span class="hs-identifier hs-var">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-651"></a><span class="hs-pragma">{-# INLINABLE fold' #-}</span><span>
</span><a name="line-652"></a><span>
</span><a name="line-653"></a><span class="hs-comment">{-| Strict, monadic fold of the elements of a 'Producer'

&gt; Control.Foldl.impurely foldM :: Monad m =&gt; FoldM a b -&gt; Producer a m () -&gt; m b
-}</span><span>
</span><a name="line-657"></a><span class="hs-identifier">foldM</span><span>
</span><a name="line-658"></a><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071052"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-659"></a><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071053"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071054"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071052"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071053"><span class="hs-identifier hs-type">x</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071052"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071053"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071053"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071052"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071055"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071054"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071052"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071052"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071055"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-660"></a><a name="foldM"><a href="Pipes.Prelude.html#foldM"><span class="hs-identifier">foldM</span></a></a><span> </span><a name="local-6989586621679073207"><a href="#local-6989586621679073207"><span class="hs-identifier">step</span></a></a><span> </span><a name="local-6989586621679073208"><a href="#local-6989586621679073208"><span class="hs-identifier">begin</span></a></a><span> </span><a name="local-6989586621679073209"><a href="#local-6989586621679073209"><span class="hs-identifier">done</span></a></a><span> </span><a name="local-6989586621679073210"><a href="#local-6989586621679073210"><span class="hs-identifier">p0</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-661"></a><span>    </span><a name="local-6989586621679073220"><a href="#local-6989586621679073220"><span class="hs-identifier">x0</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679073208"><span class="hs-identifier hs-var">begin</span></a><span>
</span><a name="line-662"></a><span>    </span><a href="#local-6989586621679073211"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073210"><span class="hs-identifier hs-var">p0</span></a><span> </span><a href="#local-6989586621679073220"><span class="hs-identifier hs-var">x0</span></a><span>
</span><a name="line-663"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-664"></a><span>    </span><a name="local-6989586621679073211"><a href="#local-6989586621679073211"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073212"><a href="#local-6989586621679073212"><span class="hs-identifier">p</span></a></a><span> </span><a name="local-6989586621679073213"><a href="#local-6989586621679073213"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073212"><span class="hs-identifier hs-var">p</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-665"></a><span>        </span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a><span> </span><a name="local-6989586621679073214"><a href="#local-6989586621679073214"><span class="hs-identifier">v</span></a></a><span>  </span><span class="hs-identifier">_</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Internal.html#closed"><span class="hs-identifier hs-var">closed</span></a><span> </span><a href="#local-6989586621679073214"><span class="hs-identifier hs-var">v</span></a><span>
</span><a name="line-666"></a><span>        </span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a><span> </span><a name="local-6989586621679073215"><a href="#local-6989586621679073215"><span class="hs-identifier">a</span></a></a><span>  </span><a name="local-6989586621679073216"><a href="#local-6989586621679073216"><span class="hs-identifier">fu</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-667"></a><span>            </span><a name="local-6989586621679073217"><a href="#local-6989586621679073217"><span class="hs-identifier">x'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679073207"><span class="hs-identifier hs-var">step</span></a><span> </span><a href="#local-6989586621679073213"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="#local-6989586621679073215"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-668"></a><span>            </span><a href="#local-6989586621679073211"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073216"><span class="hs-identifier hs-var">fu</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$!</span><span> </span><a href="#local-6989586621679073217"><span class="hs-identifier hs-var">x'</span></a><span>
</span><a name="line-669"></a><span>        </span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a><span>          </span><a name="local-6989586621679073218"><a href="#local-6989586621679073218"><span class="hs-identifier">m</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073218"><span class="hs-identifier hs-var">m</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679073219"><a href="#local-6989586621679073219"><span class="hs-identifier">p'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073211"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073219"><span class="hs-identifier hs-var">p'</span></a><span> </span><a href="#local-6989586621679073213"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-670"></a><span>        </span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a><span>    </span><span class="hs-identifier">_</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073209"><span class="hs-identifier hs-var">done</span></a><span> </span><a href="#local-6989586621679073213"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-671"></a><span class="hs-pragma">{-# INLINABLE foldM #-}</span><span>
</span><a name="line-672"></a><span>
</span><a name="line-673"></a><span class="hs-comment">{-| Strict, monadic fold of the elements of a 'Producer'

&gt; Control.Foldl.impurely foldM' :: Monad m =&gt; FoldM a b -&gt; Producer a m r -&gt; m (b, r)
-}</span><span>
</span><a name="line-677"></a><span class="hs-identifier">foldM'</span><span>
</span><a name="line-678"></a><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071047"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-679"></a><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071048"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071049"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071047"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071048"><span class="hs-identifier hs-type">x</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071047"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071048"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071048"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071047"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071050"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071049"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071047"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071051"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071047"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071050"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679071051"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-680"></a><a name="foldM%27"><a href="Pipes.Prelude.html#foldM%27"><span class="hs-identifier">foldM'</span></a></a><span> </span><a name="local-6989586621679073221"><a href="#local-6989586621679073221"><span class="hs-identifier">step</span></a></a><span> </span><a name="local-6989586621679073222"><a href="#local-6989586621679073222"><span class="hs-identifier">begin</span></a></a><span> </span><a name="local-6989586621679073223"><a href="#local-6989586621679073223"><span class="hs-identifier">done</span></a></a><span> </span><a name="local-6989586621679073224"><a href="#local-6989586621679073224"><span class="hs-identifier">p0</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-681"></a><span>    </span><a name="local-6989586621679073236"><a href="#local-6989586621679073236"><span class="hs-identifier">x0</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679073222"><span class="hs-identifier hs-var">begin</span></a><span>
</span><a name="line-682"></a><span>    </span><a href="#local-6989586621679073225"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073224"><span class="hs-identifier hs-var">p0</span></a><span> </span><a href="#local-6989586621679073236"><span class="hs-identifier hs-var">x0</span></a><span>
</span><a name="line-683"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-684"></a><span>    </span><a name="local-6989586621679073225"><a href="#local-6989586621679073225"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073226"><a href="#local-6989586621679073226"><span class="hs-identifier">p</span></a></a><span> </span><a name="local-6989586621679073227"><a href="#local-6989586621679073227"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073226"><span class="hs-identifier hs-var">p</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-685"></a><span>        </span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a><span> </span><a name="local-6989586621679073228"><a href="#local-6989586621679073228"><span class="hs-identifier">v</span></a></a><span>  </span><span class="hs-identifier">_</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Internal.html#closed"><span class="hs-identifier hs-var">closed</span></a><span> </span><a href="#local-6989586621679073228"><span class="hs-identifier hs-var">v</span></a><span>
</span><a name="line-686"></a><span>        </span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a><span> </span><a name="local-6989586621679073229"><a href="#local-6989586621679073229"><span class="hs-identifier">a</span></a></a><span>  </span><a name="local-6989586621679073230"><a href="#local-6989586621679073230"><span class="hs-identifier">fu</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-687"></a><span>            </span><a name="local-6989586621679073231"><a href="#local-6989586621679073231"><span class="hs-identifier">x'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679073221"><span class="hs-identifier hs-var">step</span></a><span> </span><a href="#local-6989586621679073227"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="#local-6989586621679073229"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-688"></a><span>            </span><a href="#local-6989586621679073225"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073230"><span class="hs-identifier hs-var">fu</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$!</span><span> </span><a href="#local-6989586621679073231"><span class="hs-identifier hs-var">x'</span></a><span>
</span><a name="line-689"></a><span>        </span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a><span>          </span><a name="local-6989586621679073232"><a href="#local-6989586621679073232"><span class="hs-identifier">m</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073232"><span class="hs-identifier hs-var">m</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679073233"><a href="#local-6989586621679073233"><span class="hs-identifier">p'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073225"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073233"><span class="hs-identifier hs-var">p'</span></a><span> </span><a href="#local-6989586621679073227"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-690"></a><span>        </span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a><span>    </span><a name="local-6989586621679073234"><a href="#local-6989586621679073234"><span class="hs-identifier">r</span></a></a><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-691"></a><span>            </span><a name="local-6989586621679073235"><a href="#local-6989586621679073235"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679073223"><span class="hs-identifier hs-var">done</span></a><span> </span><a href="#local-6989586621679073227"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-692"></a><span>            </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073235"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679073234"><span class="hs-identifier hs-var">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-693"></a><span class="hs-pragma">{-# INLINABLE foldM' #-}</span><span>
</span><a name="line-694"></a><span>
</span><a name="line-695"></a><span class="hs-comment">{-| @(all predicate p)@ determines whether all the elements of @p@ satisfy the
    predicate.
-}</span><span>
</span><a name="line-698"></a><span class="hs-identifier">all</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071045"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071046"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071046"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071045"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071045"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-699"></a><a name="all"><a href="Pipes.Prelude.html#all"><span class="hs-identifier">all</span></a></a><span> </span><a name="local-6989586621679073237"><a href="#local-6989586621679073237"><span class="hs-identifier">predicate</span></a></a><span> </span><a name="local-6989586621679073238"><a href="#local-6989586621679073238"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#null"><span class="hs-identifier hs-var">null</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679073238"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="Pipes.html#%3E-%3E"><span class="hs-operator hs-var">&gt;-&gt;</span></a><span> </span><a href="Pipes.Prelude.html#filter"><span class="hs-identifier hs-var">filter</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679073239"><a href="#local-6989586621679073239"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073237"><span class="hs-identifier hs-var">predicate</span></a><span> </span><a href="#local-6989586621679073239"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-700"></a><span class="hs-pragma">{-# INLINABLE all #-}</span><span>
</span><a name="line-701"></a><span>
</span><a name="line-702"></a><span class="hs-comment">{-| @(any predicate p)@ determines whether any element of @p@ satisfies the
    predicate.
-}</span><span>
</span><a name="line-705"></a><span class="hs-identifier">any</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071043"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071044"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071044"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071043"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071043"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-706"></a><a name="any"><a href="Pipes.Prelude.html#any"><span class="hs-identifier">any</span></a></a><span> </span><a name="local-6989586621679073240"><a href="#local-6989586621679073240"><span class="hs-identifier">predicate</span></a></a><span> </span><a name="local-6989586621679073241"><a href="#local-6989586621679073241"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">liftM</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Pipes.Prelude.html#null"><span class="hs-identifier hs-var">null</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073241"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="Pipes.html#%3E-%3E"><span class="hs-operator hs-var">&gt;-&gt;</span></a><span> </span><a href="Pipes.Prelude.html#filter"><span class="hs-identifier hs-var">filter</span></a><span> </span><a href="#local-6989586621679073240"><span class="hs-identifier hs-var">predicate</span></a><span class="hs-special">)</span><span>
</span><a name="line-707"></a><span class="hs-pragma">{-# INLINABLE any #-}</span><span>
</span><a name="line-708"></a><span>
</span><a name="line-709"></a><span class="hs-comment">-- | Determines whether all elements are 'True'</span><span>
</span><a name="line-710"></a><span class="hs-identifier">and</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071042"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span> </span><a href="#local-6989586621679071042"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071042"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-711"></a><a name="and"><a href="Pipes.Prelude.html#and"><span class="hs-identifier">and</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#all"><span class="hs-identifier hs-var">all</span></a><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-712"></a><span class="hs-pragma">{-# INLINABLE and #-}</span><span>
</span><a name="line-713"></a><span>
</span><a name="line-714"></a><span class="hs-comment">-- | Determines whether any element is 'True'</span><span>
</span><a name="line-715"></a><span class="hs-identifier">or</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071041"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span> </span><a href="#local-6989586621679071041"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071041"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-716"></a><a name="or"><a href="Pipes.Prelude.html#or"><span class="hs-identifier">or</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#any"><span class="hs-identifier hs-var">any</span></a><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-717"></a><span class="hs-pragma">{-# INLINABLE or #-}</span><span>
</span><a name="line-718"></a><span>
</span><a name="line-719"></a><span class="hs-comment">{-| @(elem a p)@ returns 'True' if @p@ has an element equal to @a@, 'False'
    otherwise
-}</span><span>
</span><a name="line-722"></a><span class="hs-identifier">elem</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071039"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><a href="#local-6989586621679071040"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679071040"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071040"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071039"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071039"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-723"></a><a name="elem"><a href="Pipes.Prelude.html#elem"><span class="hs-identifier">elem</span></a></a><span> </span><a name="local-6989586621679073242"><a href="#local-6989586621679073242"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#any"><span class="hs-identifier hs-var">any</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073242"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">==</span><span class="hs-special">)</span><span>
</span><a name="line-724"></a><span class="hs-pragma">{-# INLINABLE elem #-}</span><span>
</span><a name="line-725"></a><span>
</span><a name="line-726"></a><span class="hs-comment">{-| @(notElem a)@ returns 'False' if @p@ has an element equal to @a@, 'True'
    otherwise
-}</span><span>
</span><a name="line-729"></a><span class="hs-identifier">notElem</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071037"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><a href="#local-6989586621679071038"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679071038"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071038"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071037"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071037"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-730"></a><a name="notElem"><a href="Pipes.Prelude.html#notElem"><span class="hs-identifier">notElem</span></a></a><span> </span><a name="local-6989586621679073243"><a href="#local-6989586621679073243"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#all"><span class="hs-identifier hs-var">all</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073243"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">/=</span><span class="hs-special">)</span><span>
</span><a name="line-731"></a><span class="hs-pragma">{-# INLINABLE notElem #-}</span><span>
</span><a name="line-732"></a><span>
</span><a name="line-733"></a><span class="hs-comment">-- | Find the first element of a 'Producer' that satisfies the predicate</span><span>
</span><a name="line-734"></a><span class="hs-identifier">find</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071035"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071036"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071036"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071035"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071035"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679071036"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-735"></a><a name="find"><a href="Pipes.Prelude.html#find"><span class="hs-identifier">find</span></a></a><span> </span><a name="local-6989586621679073244"><a href="#local-6989586621679073244"><span class="hs-identifier">predicate</span></a></a><span> </span><a name="local-6989586621679073245"><a href="#local-6989586621679073245"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#head"><span class="hs-identifier hs-var">head</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073245"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="Pipes.html#%3E-%3E"><span class="hs-operator hs-var">&gt;-&gt;</span></a><span> </span><a href="Pipes.Prelude.html#filter"><span class="hs-identifier hs-var">filter</span></a><span> </span><a href="#local-6989586621679073244"><span class="hs-identifier hs-var">predicate</span></a><span class="hs-special">)</span><span>
</span><a name="line-736"></a><span class="hs-pragma">{-# INLINABLE find #-}</span><span>
</span><a name="line-737"></a><span>
</span><a name="line-738"></a><span class="hs-comment">{-| Find the index of the first element of a 'Producer' that satisfies the
    predicate
-}</span><span>
</span><a name="line-741"></a><span class="hs-identifier">findIndex</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071033"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071034"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071034"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071033"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071033"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-identifier hs-type">Int</span><span class="hs-special">)</span><span>
</span><a name="line-742"></a><a name="findIndex"><a href="Pipes.Prelude.html#findIndex"><span class="hs-identifier">findIndex</span></a></a><span> </span><a name="local-6989586621679073246"><a href="#local-6989586621679073246"><span class="hs-identifier">predicate</span></a></a><span> </span><a name="local-6989586621679073247"><a href="#local-6989586621679073247"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#head"><span class="hs-identifier hs-var">head</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073247"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="Pipes.html#%3E-%3E"><span class="hs-operator hs-var">&gt;-&gt;</span></a><span> </span><a href="Pipes.Prelude.html#findIndices"><span class="hs-identifier hs-var">findIndices</span></a><span> </span><a href="#local-6989586621679073246"><span class="hs-identifier hs-var">predicate</span></a><span class="hs-special">)</span><span>
</span><a name="line-743"></a><span class="hs-pragma">{-# INLINABLE findIndex #-}</span><span>
</span><a name="line-744"></a><span>
</span><a name="line-745"></a><span class="hs-comment">-- | Retrieve the first element from a 'Producer'</span><span>
</span><a name="line-746"></a><span class="hs-identifier">head</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071031"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071032"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071031"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071031"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679071032"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-747"></a><a name="head"><a href="Pipes.Prelude.html#head"><span class="hs-identifier">head</span></a></a><span> </span><a name="local-6989586621679073248"><a href="#local-6989586621679073248"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-748"></a><span>    </span><a name="local-6989586621679073249"><a href="#local-6989586621679073249"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#next"><span class="hs-identifier hs-var">next</span></a><span> </span><a href="#local-6989586621679073248"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-749"></a><span>    </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073249"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-750"></a><span>        </span><span class="hs-identifier hs-var">Left</span><span>   </span><span class="hs-identifier">_</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-751"></a><span>        </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679073250"><a href="#local-6989586621679073250"><span class="hs-identifier">a</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><a href="#local-6989586621679073250"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-752"></a><span class="hs-pragma">{-# INLINABLE head #-}</span><span>
</span><a name="line-753"></a><span>
</span><a name="line-754"></a><span class="hs-comment">-- | Index into a 'Producer'</span><span>
</span><a name="line-755"></a><span class="hs-identifier">index</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071029"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071030"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071029"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071029"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679071030"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-756"></a><a name="index"><a href="Pipes.Prelude.html#index"><span class="hs-identifier">index</span></a></a><span> </span><a name="local-6989586621679073251"><a href="#local-6989586621679073251"><span class="hs-identifier">n</span></a></a><span> </span><a name="local-6989586621679073252"><a href="#local-6989586621679073252"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#head"><span class="hs-identifier hs-var">head</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073252"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="Pipes.html#%3E-%3E"><span class="hs-operator hs-var">&gt;-&gt;</span></a><span> </span><a href="Pipes.Prelude.html#drop"><span class="hs-identifier hs-var">drop</span></a><span> </span><a href="#local-6989586621679073251"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span>
</span><a name="line-757"></a><span class="hs-pragma">{-# INLINABLE index #-}</span><span>
</span><a name="line-758"></a><span>
</span><a name="line-759"></a><span class="hs-comment">-- | Retrieve the last element from a 'Producer'</span><span>
</span><a name="line-760"></a><span class="hs-identifier">last</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071027"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071028"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071027"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071027"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679071028"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-761"></a><a name="last"><a href="Pipes.Prelude.html#last"><span class="hs-identifier">last</span></a></a><span> </span><a name="local-6989586621679073253"><a href="#local-6989586621679073253"><span class="hs-identifier">p0</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-762"></a><span>    </span><a name="local-6989586621679073260"><a href="#local-6989586621679073260"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#next"><span class="hs-identifier hs-var">next</span></a><span> </span><a href="#local-6989586621679073253"><span class="hs-identifier hs-var">p0</span></a><span>
</span><a name="line-763"></a><span>    </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073260"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-764"></a><span>        </span><span class="hs-identifier hs-var">Left</span><span>   </span><span class="hs-identifier">_</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-765"></a><span>        </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679073261"><a href="#local-6989586621679073261"><span class="hs-identifier">a</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679073262"><a href="#local-6989586621679073262"><span class="hs-identifier">p'</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073254"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073261"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679073262"><span class="hs-identifier hs-var">p'</span></a><span>
</span><a name="line-766"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-767"></a><span>    </span><a name="local-6989586621679073254"><a href="#local-6989586621679073254"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073255"><a href="#local-6989586621679073255"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679073256"><a href="#local-6989586621679073256"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-768"></a><span>        </span><a name="local-6989586621679073257"><a href="#local-6989586621679073257"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#next"><span class="hs-identifier hs-var">next</span></a><span> </span><a href="#local-6989586621679073256"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-769"></a><span>        </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073257"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-770"></a><span>            </span><span class="hs-identifier hs-var">Left</span><span>   </span><span class="hs-identifier">_</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Just</span><span> </span><a href="#local-6989586621679073255"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-771"></a><span>            </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679073258"><a href="#local-6989586621679073258"><span class="hs-identifier">a'</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679073259"><a href="#local-6989586621679073259"><span class="hs-identifier">p'</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073254"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073258"><span class="hs-identifier hs-var">a'</span></a><span> </span><a href="#local-6989586621679073259"><span class="hs-identifier hs-var">p'</span></a><span>
</span><a name="line-772"></a><span class="hs-pragma">{-# INLINABLE last #-}</span><span>
</span><a name="line-773"></a><span>
</span><a name="line-774"></a><span class="hs-comment">-- | Count the number of elements in a 'Producer'</span><span>
</span><a name="line-775"></a><span class="hs-identifier">length</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071025"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071026"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071025"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071025"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-776"></a><a name="length"><a href="Pipes.Prelude.html#length"><span class="hs-identifier">length</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#fold"><span class="hs-identifier hs-var">fold</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679073263"><a href="#local-6989586621679073263"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073263"><span class="hs-identifier hs-var">n</span></a><span> </span><span class="hs-operator hs-var">+</span><span> </span><span class="hs-number">1</span><span class="hs-special">)</span><span> </span><span class="hs-number">0</span><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-777"></a><span class="hs-pragma">{-# INLINABLE length #-}</span><span>
</span><a name="line-778"></a><span>
</span><a name="line-779"></a><span class="hs-comment">-- | Find the maximum element of a 'Producer'</span><span>
</span><a name="line-780"></a><span class="hs-identifier">maximum</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071023"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><a href="#local-6989586621679071024"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071024"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071023"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071023"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679071024"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-781"></a><a name="maximum"><a href="Pipes.Prelude.html#maximum"><span class="hs-identifier">maximum</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#fold"><span class="hs-identifier hs-var">fold</span></a><span> </span><a href="#local-6989586621679073264"><span class="hs-identifier hs-var">step</span></a><span> </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-782"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-783"></a><span>    </span><a name="local-6989586621679073264"><a href="#local-6989586621679073264"><span class="hs-identifier">step</span></a></a><span> </span><a name="local-6989586621679073265"><a href="#local-6989586621679073265"><span class="hs-identifier">x</span></a></a><span> </span><a name="local-6989586621679073266"><a href="#local-6989586621679073266"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073265"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-784"></a><span>        </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073266"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-785"></a><span>        </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679073267"><a href="#local-6989586621679073267"><span class="hs-identifier">a'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">max</span><span> </span><a href="#local-6989586621679073266"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679073267"><span class="hs-identifier hs-var">a'</span></a><span>
</span><a name="line-786"></a><span class="hs-pragma">{-# INLINABLE maximum #-}</span><span>
</span><a name="line-787"></a><span>
</span><a name="line-788"></a><span class="hs-comment">-- | Find the minimum element of a 'Producer'</span><span>
</span><a name="line-789"></a><span class="hs-identifier">minimum</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071021"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><a href="#local-6989586621679071022"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071022"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071021"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071021"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679071022"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-790"></a><a name="minimum"><a href="Pipes.Prelude.html#minimum"><span class="hs-identifier">minimum</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#fold"><span class="hs-identifier hs-var">fold</span></a><span> </span><a href="#local-6989586621679073268"><span class="hs-identifier hs-var">step</span></a><span> </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-791"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-792"></a><span>    </span><a name="local-6989586621679073268"><a href="#local-6989586621679073268"><span class="hs-identifier">step</span></a></a><span> </span><a name="local-6989586621679073269"><a href="#local-6989586621679073269"><span class="hs-identifier">x</span></a></a><span> </span><a name="local-6989586621679073270"><a href="#local-6989586621679073270"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073269"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-793"></a><span>        </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073270"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-794"></a><span>        </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679073271"><a href="#local-6989586621679073271"><span class="hs-identifier">a'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">min</span><span> </span><a href="#local-6989586621679073270"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679073271"><span class="hs-identifier hs-var">a'</span></a><span>
</span><a name="line-795"></a><span class="hs-pragma">{-# INLINABLE minimum #-}</span><span>
</span><a name="line-796"></a><span>
</span><a name="line-797"></a><span class="hs-comment">-- | Determine if a 'Producer' is empty</span><span>
</span><a name="line-798"></a><span class="hs-identifier">null</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071019"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071020"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071019"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071019"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-799"></a><a name="null"><a href="Pipes.Prelude.html#null"><span class="hs-identifier">null</span></a></a><span> </span><a name="local-6989586621679073272"><a href="#local-6989586621679073272"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-800"></a><span>    </span><a name="local-6989586621679073273"><a href="#local-6989586621679073273"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#next"><span class="hs-identifier hs-var">next</span></a><span> </span><a href="#local-6989586621679073272"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-801"></a><span>    </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073273"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-802"></a><span>        </span><span class="hs-identifier hs-var">Left</span><span>  </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-803"></a><span>        </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-804"></a><span class="hs-pragma">{-# INLINABLE null #-}</span><span>
</span><a name="line-805"></a><span>
</span><a name="line-806"></a><span class="hs-comment">-- | Compute the sum of the elements of a 'Producer'</span><span>
</span><a name="line-807"></a><span class="hs-identifier">sum</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071017"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Num</span><span> </span><a href="#local-6989586621679071018"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071018"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071017"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071017"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071018"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-808"></a><a name="sum"><a href="Pipes.Prelude.html#sum"><span class="hs-identifier">sum</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#fold"><span class="hs-identifier hs-var">fold</span></a><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">+</span><span class="hs-special">)</span><span> </span><span class="hs-number">0</span><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-809"></a><span class="hs-pragma">{-# INLINABLE sum #-}</span><span>
</span><a name="line-810"></a><span>
</span><a name="line-811"></a><span class="hs-comment">-- | Compute the product of the elements of a 'Producer'</span><span>
</span><a name="line-812"></a><span class="hs-identifier">product</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071015"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Num</span><span> </span><a href="#local-6989586621679071016"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071016"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071015"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071015"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071016"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-813"></a><a name="product"><a href="Pipes.Prelude.html#product"><span class="hs-identifier">product</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#fold"><span class="hs-identifier hs-var">fold</span></a><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">*</span><span class="hs-special">)</span><span> </span><span class="hs-number">1</span><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-814"></a><span class="hs-pragma">{-# INLINABLE product #-}</span><span>
</span><a name="line-815"></a><span>
</span><a name="line-816"></a><span class="hs-comment">-- | Convert a pure 'Producer' into a list</span><span>
</span><a name="line-817"></a><span class="hs-identifier">toList</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071014"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-identifier hs-type">Identity</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621679071014"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span>
</span><a name="line-818"></a><a name="toList"><a href="Pipes.Prelude.html#toList"><span class="hs-identifier">toList</span></a></a><span> </span><a name="local-6989586621679073274"><a href="#local-6989586621679073274"><span class="hs-identifier">prod0</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">build</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073275"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073274"><span class="hs-identifier hs-var">prod0</span></a><span class="hs-special">)</span><span>
</span><a name="line-819"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-820"></a><span>    </span><a name="local-6989586621679073275"><a href="#local-6989586621679073275"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073276"><a href="#local-6989586621679073276"><span class="hs-identifier">prod</span></a></a><span> </span><a name="local-6989586621679073277"><a href="#local-6989586621679073277"><span class="hs-identifier">cons</span></a></a><span> </span><a name="local-6989586621679073278"><a href="#local-6989586621679073278"><span class="hs-identifier">nil</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-821"></a><span>      </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073276"><span class="hs-identifier hs-var">prod</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-822"></a><span>        </span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a><span> </span><a name="local-6989586621679073279"><a href="#local-6989586621679073279"><span class="hs-identifier">v</span></a></a><span> </span><span class="hs-identifier">_</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Internal.html#closed"><span class="hs-identifier hs-var">closed</span></a><span> </span><a href="#local-6989586621679073279"><span class="hs-identifier hs-var">v</span></a><span>
</span><a name="line-823"></a><span>        </span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a><span> </span><a name="local-6989586621679073280"><a href="#local-6989586621679073280"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679073281"><a href="#local-6989586621679073281"><span class="hs-identifier">fu</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073277"><span class="hs-identifier hs-var">cons</span></a><span> </span><a href="#local-6989586621679073280"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073275"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073281"><span class="hs-identifier hs-var">fu</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679073277"><span class="hs-identifier hs-var">cons</span></a><span> </span><a href="#local-6989586621679073278"><span class="hs-identifier hs-var">nil</span></a><span class="hs-special">)</span><span>
</span><a name="line-824"></a><span>        </span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a><span>         </span><a name="local-6989586621679073282"><a href="#local-6989586621679073282"><span class="hs-identifier">m</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073275"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">runIdentity</span><span> </span><a href="#local-6989586621679073282"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679073277"><span class="hs-identifier hs-var">cons</span></a><span> </span><a href="#local-6989586621679073278"><span class="hs-identifier hs-var">nil</span></a><span>
</span><a name="line-825"></a><span>        </span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a><span>    </span><span class="hs-identifier">_</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073278"><span class="hs-identifier hs-var">nil</span></a><span>
</span><a name="line-826"></a><span class="hs-pragma">{-# INLINE toList #-}</span><span>
</span><a name="line-827"></a><span>
</span><a name="line-828"></a><span class="hs-comment">{-| Convert an effectful 'Producer' into a list

    Note: 'toListM' is not an idiomatic use of @pipes@, but I provide it for
    simple testing purposes.  Idiomatic @pipes@ style consumes the elements
    immediately as they are generated instead of loading all elements into
    memory.
-}</span><span>
</span><a name="line-835"></a><span class="hs-identifier">toListM</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071012"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071013"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071012"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071012"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621679071013"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span>
</span><a name="line-836"></a><a name="toListM"><a href="Pipes.Prelude.html#toListM"><span class="hs-identifier">toListM</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#fold"><span class="hs-identifier hs-var">fold</span></a><span> </span><a href="#local-6989586621679073283"><span class="hs-identifier hs-var">step</span></a><span> </span><a href="#local-6989586621679073284"><span class="hs-identifier hs-var">begin</span></a><span> </span><a href="#local-6989586621679073285"><span class="hs-identifier hs-var">done</span></a><span>
</span><a name="line-837"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-838"></a><span>    </span><a name="local-6989586621679073283"><a href="#local-6989586621679073283"><span class="hs-identifier">step</span></a></a><span> </span><a name="local-6989586621679073286"><a href="#local-6989586621679073286"><span class="hs-identifier">x</span></a></a><span> </span><a name="local-6989586621679073287"><a href="#local-6989586621679073287"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073286"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073287"><span class="hs-identifier hs-var">a</span></a><span class="hs-glyph">:</span><span class="hs-special">)</span><span>
</span><a name="line-839"></a><span>    </span><a name="local-6989586621679073284"><a href="#local-6989586621679073284"><span class="hs-identifier">begin</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-840"></a><span>    </span><a name="local-6989586621679073285"><a href="#local-6989586621679073285"><span class="hs-identifier">done</span></a></a><span> </span><a name="local-6989586621679073288"><a href="#local-6989586621679073288"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073288"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-841"></a><span class="hs-pragma">{-# INLINABLE toListM #-}</span><span>
</span><a name="line-842"></a><span>
</span><a name="line-843"></a><span class="hs-comment">{-| Convert an effectful 'Producer' into a list alongside the return value

    Note: 'toListM'' is not an idiomatic use of @pipes@, but I provide it for
    simple testing purposes.  Idiomatic @pipes@ style consumes the elements
    immediately as they are generated instead of loading all elements into
    memory.
-}</span><span>
</span><a name="line-850"></a><span class="hs-identifier">toListM'</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071009"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679071010"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071009"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071011"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071009"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="#local-6989586621679071010"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><a href="#local-6989586621679071011"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-851"></a><a name="toListM%27"><a href="Pipes.Prelude.html#toListM%27"><span class="hs-identifier">toListM'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#fold%27"><span class="hs-identifier hs-var">fold'</span></a><span> </span><a href="#local-6989586621679073289"><span class="hs-identifier hs-var">step</span></a><span> </span><a href="#local-6989586621679073290"><span class="hs-identifier hs-var">begin</span></a><span> </span><a href="#local-6989586621679073291"><span class="hs-identifier hs-var">done</span></a><span>
</span><a name="line-852"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-853"></a><span>    </span><a name="local-6989586621679073289"><a href="#local-6989586621679073289"><span class="hs-identifier">step</span></a></a><span> </span><a name="local-6989586621679073292"><a href="#local-6989586621679073292"><span class="hs-identifier">x</span></a></a><span> </span><a name="local-6989586621679073293"><a href="#local-6989586621679073293"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073292"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073293"><span class="hs-identifier hs-var">a</span></a><span class="hs-glyph">:</span><span class="hs-special">)</span><span>
</span><a name="line-854"></a><span>    </span><a name="local-6989586621679073290"><a href="#local-6989586621679073290"><span class="hs-identifier">begin</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-855"></a><span>    </span><a name="local-6989586621679073291"><a href="#local-6989586621679073291"><span class="hs-identifier">done</span></a></a><span> </span><a name="local-6989586621679073294"><a href="#local-6989586621679073294"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073294"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-856"></a><span class="hs-pragma">{-# INLINABLE toListM' #-}</span><span>
</span><a name="line-857"></a><span>
</span><a name="line-858"></a><span class="hs-comment">-- | Zip two 'Producer's</span><span>
</span><a name="line-859"></a><span class="hs-identifier">zip</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071005"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-860"></a><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span>   </span><a href="#local-6989586621679071006"><span class="hs-identifier hs-type">a</span></a><span>     </span><a href="#local-6989586621679071005"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071007"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-861"></a><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span>      </span><a href="#local-6989586621679071008"><span class="hs-identifier hs-type">b</span></a><span>  </span><a href="#local-6989586621679071005"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071007"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-862"></a><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Pipes.Core.html#Producer%27"><span class="hs-identifier hs-type">Producer'</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071006"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679071008"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679071005"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071007"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-863"></a><a name="zip"><a href="Pipes.Prelude.html#zip"><span class="hs-identifier">zip</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#zipWith"><span class="hs-identifier hs-var">zipWith</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span>
</span><a name="line-864"></a><span class="hs-pragma">{-# INLINABLE zip #-}</span><span>
</span><a name="line-865"></a><span>
</span><a name="line-866"></a><span class="hs-comment">-- | Zip two 'Producer's using the provided combining function</span><span>
</span><a name="line-867"></a><span class="hs-identifier">zipWith</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071000"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-868"></a><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071001"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071002"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071003"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">)</span><span>
</span><a name="line-869"></a><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span>  </span><a href="#local-6989586621679071001"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071000"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071004"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-870"></a><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span>  </span><a href="#local-6989586621679071002"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679071000"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071004"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-871"></a><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Pipes.Core.html#Producer%27"><span class="hs-identifier hs-type">Producer'</span></a><span> </span><a href="#local-6989586621679071003"><span class="hs-identifier hs-type">c</span></a><span> </span><a href="#local-6989586621679071000"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071004"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-872"></a><a name="zipWith"><a href="Pipes.Prelude.html#zipWith"><span class="hs-identifier">zipWith</span></a></a><span> </span><a name="local-6989586621679073295"><a href="#local-6989586621679073295"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073296"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-873"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-874"></a><span>    </span><a name="local-6989586621679073296"><a href="#local-6989586621679073296"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073297"><a href="#local-6989586621679073297"><span class="hs-identifier">p1</span></a></a><span> </span><a name="local-6989586621679073298"><a href="#local-6989586621679073298"><span class="hs-identifier">p2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-875"></a><span>        </span><a name="local-6989586621679073299"><a href="#local-6989586621679073299"><span class="hs-identifier">e1</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Pipes.html#next"><span class="hs-identifier hs-var">next</span></a><span> </span><a href="#local-6989586621679073297"><span class="hs-identifier hs-var">p1</span></a><span>
</span><a name="line-876"></a><span>        </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073299"><span class="hs-identifier hs-var">e1</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-877"></a><span>            </span><span class="hs-identifier hs-var">Left</span><span> </span><a name="local-6989586621679073300"><a href="#local-6989586621679073300"><span class="hs-identifier">r</span></a></a><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679073300"><span class="hs-identifier hs-var">r</span></a><span>
</span><a name="line-878"></a><span>            </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679073301"><a href="#local-6989586621679073301"><span class="hs-identifier">a</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679073302"><a href="#local-6989586621679073302"><span class="hs-identifier">p1'</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-879"></a><span>                </span><a name="local-6989586621679073303"><a href="#local-6989586621679073303"><span class="hs-identifier">e2</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Pipes.html#next"><span class="hs-identifier hs-var">next</span></a><span> </span><a href="#local-6989586621679073298"><span class="hs-identifier hs-var">p2</span></a><span>
</span><a name="line-880"></a><span>                </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073303"><span class="hs-identifier hs-var">e2</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-881"></a><span>                    </span><span class="hs-identifier hs-var">Left</span><span> </span><a name="local-6989586621679073304"><a href="#local-6989586621679073304"><span class="hs-identifier">r</span></a></a><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679073304"><span class="hs-identifier hs-var">r</span></a><span>
</span><a name="line-882"></a><span>                    </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679073305"><a href="#local-6989586621679073305"><span class="hs-identifier">b</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679073306"><a href="#local-6989586621679073306"><span class="hs-identifier">p2'</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-883"></a><span>                        </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073295"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679073301"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679073305"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-884"></a><span>                        </span><a href="#local-6989586621679073296"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073302"><span class="hs-identifier hs-var">p1'</span></a><span> </span><a href="#local-6989586621679073306"><span class="hs-identifier hs-var">p2'</span></a><span>
</span><a name="line-885"></a><span class="hs-pragma">{-# INLINABLE zipWith #-}</span><span>
</span><a name="line-886"></a><span>
</span><a name="line-887"></a><span class="hs-comment">{-| Transform a 'Consumer' to a 'Pipe' that reforwards all values further
    downstream
-}</span><span>
</span><a name="line-890"></a><span class="hs-identifier">tee</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070997"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Consumer"><span class="hs-identifier hs-type">Consumer</span></a><span> </span><a href="#local-6989586621679070998"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070997"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070999"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679070998"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070998"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070997"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070999"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-891"></a><a name="tee"><a href="Pipes.Prelude.html#tee"><span class="hs-identifier">tee</span></a></a><span> </span><a name="local-6989586621679073307"><a href="#local-6989586621679073307"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Lift.html#evalStateP"><span class="hs-identifier hs-var">evalStateP</span></a><span> </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-892"></a><span>    </span><a name="local-6989586621679073314"><a href="#local-6989586621679073314"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679073308"><span class="hs-identifier hs-var">up</span></a><span> </span><a href="Pipes.Core.html#%3E%5C%5C"><span class="hs-operator hs-var">&gt;\\</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">hoist</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><a href="#local-6989586621679073307"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="Pipes.Core.html#%2F%2F%3E"><span class="hs-operator hs-var">//&gt;</span></a><span> </span><a href="#local-6989586621679073309"><span class="hs-identifier hs-var">dn</span></a><span class="hs-special">)</span><span>
</span><a name="line-893"></a><span>    </span><a name="local-6989586621679073315"><a href="#local-6989586621679073315"><span class="hs-identifier">ma</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-identifier hs-var">get</span><span>
</span><a name="line-894"></a><span>    </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073315"><span class="hs-identifier hs-var">ma</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-895"></a><span>        </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-896"></a><span>        </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679073316"><a href="#local-6989586621679073316"><span class="hs-identifier">a</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073316"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-897"></a><span>    </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679073314"><span class="hs-identifier hs-var">r</span></a><span>
</span><a name="line-898"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-899"></a><span>    </span><a name="local-6989586621679073308"><a href="#local-6989586621679073308"><span class="hs-identifier">up</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-900"></a><span>        </span><a name="local-6989586621679073310"><a href="#local-6989586621679073310"><span class="hs-identifier">ma</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-identifier hs-var">get</span><span>
</span><a name="line-901"></a><span>        </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073310"><span class="hs-identifier hs-var">ma</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-902"></a><span>            </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-903"></a><span>            </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679073311"><a href="#local-6989586621679073311"><span class="hs-identifier">a</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073311"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-904"></a><span>        </span><a name="local-6989586621679073312"><a href="#local-6989586621679073312"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#await"><span class="hs-identifier hs-var">await</span></a><span>
</span><a name="line-905"></a><span>        </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">put</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Just</span><span> </span><a href="#local-6989586621679073312"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-906"></a><span>        </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679073312"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-907"></a><span>    </span><a name="local-6989586621679073309"><a href="#local-6989586621679073309"><span class="hs-identifier">dn</span></a></a><span> </span><a name="local-6989586621679073313"><a href="#local-6989586621679073313"><span class="hs-identifier">v</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Internal.html#closed"><span class="hs-identifier hs-var">closed</span></a><span> </span><a href="#local-6989586621679073313"><span class="hs-identifier hs-var">v</span></a><span>
</span><a name="line-908"></a><span class="hs-pragma">{-# INLINABLE tee #-}</span><span>
</span><a name="line-909"></a><span>
</span><a name="line-910"></a><span class="hs-comment">{-| Transform a unidirectional 'Pipe' to a bidirectional 'Proxy'

&gt; generalize (f &gt;-&gt; g) = generalize f &gt;+&gt; generalize g
&gt;
&gt; generalize cat = pull
-}</span><span>
</span><a name="line-916"></a><span class="hs-identifier">generalize</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070992"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679070993"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070994"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679070992"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070995"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070996"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a><span> </span><a href="#local-6989586621679070996"><span class="hs-identifier hs-type">x</span></a><span> </span><a href="#local-6989586621679070993"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070996"><span class="hs-identifier hs-type">x</span></a><span> </span><a href="#local-6989586621679070994"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679070992"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070995"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-917"></a><a name="generalize"><a href="Pipes.Prelude.html#generalize"><span class="hs-identifier">generalize</span></a></a><span> </span><a name="local-6989586621679073317"><a href="#local-6989586621679073317"><span class="hs-identifier">p</span></a></a><span> </span><a name="local-6989586621679073318"><a href="#local-6989586621679073318"><span class="hs-identifier">x0</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Lift.html#evalStateP"><span class="hs-identifier hs-var">evalStateP</span></a><span> </span><a href="#local-6989586621679073318"><span class="hs-identifier hs-var">x0</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679073319"><span class="hs-identifier hs-var">up</span></a><span> </span><a href="Pipes.Core.html#%3E%5C%5C"><span class="hs-operator hs-var">&gt;\\</span></a><span> </span><span class="hs-identifier hs-var">hoist</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><a href="#local-6989586621679073317"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="Pipes.Core.html#%2F%2F%3E"><span class="hs-operator hs-var">//&gt;</span></a><span> </span><a href="#local-6989586621679073320"><span class="hs-identifier hs-var">dn</span></a><span>
</span><a name="line-918"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-919"></a><span>    </span><a name="local-6989586621679073319"><a href="#local-6989586621679073319"><span class="hs-identifier">up</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-920"></a><span>        </span><a name="local-6989586621679073321"><a href="#local-6989586621679073321"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-identifier hs-var">get</span><span>
</span><a name="line-921"></a><span>        </span><a href="Pipes.Core.html#request"><span class="hs-identifier hs-var">request</span></a><span> </span><a href="#local-6989586621679073321"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-922"></a><span>    </span><a name="local-6989586621679073320"><a href="#local-6989586621679073320"><span class="hs-identifier">dn</span></a></a><span> </span><a name="local-6989586621679073322"><a href="#local-6989586621679073322"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-923"></a><span>        </span><a name="local-6989586621679073323"><a href="#local-6989586621679073323"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.Core.html#respond"><span class="hs-identifier hs-var">respond</span></a><span> </span><a href="#local-6989586621679073322"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-924"></a><span>        </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">put</span><span> </span><a href="#local-6989586621679073323"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-925"></a><span class="hs-pragma">{-# INLINABLE generalize #-}</span><span>
</span><a name="line-926"></a><span>
</span><a name="line-927"></a><span class="hs-comment">{-| The natural unfold into a 'Producer' with a step function and a seed 

&gt; unfoldr next = id
-}</span><span>
</span><a name="line-931"></a><span class="hs-identifier">unfoldr</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070988"><span class="hs-identifier hs-type">m</span></a><span> </span><span>
</span><a name="line-932"></a><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070989"><span class="hs-identifier hs-type">s</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070988"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><a href="#local-6989586621679070990"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070991"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679070989"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070989"><span class="hs-identifier hs-type">s</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070991"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070988"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070990"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-933"></a><a name="unfoldr"><a href="Pipes.Prelude.html#unfoldr"><span class="hs-identifier">unfoldr</span></a></a><span> </span><a name="local-6989586621679073324"><a href="#local-6989586621679073324"><span class="hs-identifier">step</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073325"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-934"></a><span>  </span><a name="local-6989586621679073325"><a href="#local-6989586621679073325"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073326"><a href="#local-6989586621679073326"><span class="hs-identifier">s0</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-935"></a><span>    </span><a name="local-6989586621679073327"><a href="#local-6989586621679073327"><span class="hs-identifier">e</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073324"><span class="hs-identifier hs-var">step</span></a><span> </span><a href="#local-6989586621679073326"><span class="hs-identifier hs-var">s0</span></a><span class="hs-special">)</span><span>
</span><a name="line-936"></a><span>    </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073327"><span class="hs-identifier hs-var">e</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-937"></a><span>      </span><span class="hs-identifier hs-var">Left</span><span> </span><a name="local-6989586621679073328"><a href="#local-6989586621679073328"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679073328"><span class="hs-identifier hs-var">r</span></a><span>
</span><a name="line-938"></a><span>      </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679073329"><a href="#local-6989586621679073329"><span class="hs-identifier">a</span></a></a><span class="hs-special">,</span><a name="local-6989586621679073330"><a href="#local-6989586621679073330"><span class="hs-identifier">s</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span>
</span><a name="line-939"></a><span>        </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073329"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-940"></a><span>        </span><a href="#local-6989586621679073325"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073330"><span class="hs-identifier hs-var">s</span></a><span>
</span><a name="line-941"></a><span class="hs-pragma">{-# INLINABLE unfoldr #-}</span><span>
</span><a name="line-942"></a></pre></body></html>