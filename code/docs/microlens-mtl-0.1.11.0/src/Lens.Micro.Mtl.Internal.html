<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE
CPP,
MultiParamTypeClasses,
FunctionalDependencies,
FlexibleContexts,
FlexibleInstances,
UndecidableInstances,
ScopedTypeVariables,
RankNTypes,
TypeFamilies,
KindSignatures,
Trustworthy
  #-}</span><span>
</span><a name="line-14"></a><span>
</span><a name="line-15"></a><span class="hs-comment">-- This is needed because ErrorT is deprecated.</span><span>
</span><a name="line-16"></a><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-warnings-deprecations #-}</span><span>
</span><a name="line-17"></a><span>
</span><a name="line-18"></a><span>
</span><a name="line-19"></a><span class="hs-comment">{- |
Module      :  Lens.Micro.Mtl.Internal
Copyright   :  (C) 2013-2016 Edward Kmett, 2015-2016 Artyom
License     :  BSD-style (see the file LICENSE)

This module lets you define your own instances of 'Zoom' and 'Magnify'.

The warning from &quot;Lens.Micro.Internal&quot; applies to this module as well. Don't export functions that have 'Zoom' or 'Magnify' in their type signatures. If you absolutely need to define an instance (e.g. for internal use), only do it for your own types, because otherwise I might add an instance to one of the microlens packages later and if our instances are different it might lead to subtle bugs.
-}</span><span>
</span><a name="line-28"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Lens</span><span class="hs-operator">.</span><span class="hs-identifier">Micro</span><span class="hs-operator">.</span><span class="hs-identifier">Mtl</span><span class="hs-operator">.</span><span class="hs-identifier">Internal</span><span>
</span><a name="line-29"></a><span class="hs-special">(</span><span>
</span><a name="line-30"></a><span>  </span><span class="hs-comment">-- * Classes</span><span>
</span><a name="line-31"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span class="hs-special">,</span><span>
</span><a name="line-32"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-33"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#Magnified"><span class="hs-identifier hs-type">Magnified</span></a><span class="hs-special">,</span><span>
</span><a name="line-34"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#Magnify"><span class="hs-identifier hs-type">Magnify</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-35"></a><span>
</span><a name="line-36"></a><span>  </span><span class="hs-comment">-- * Focusing (used for 'Zoom')</span><span>
</span><a name="line-37"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#Focusing"><span class="hs-identifier hs-type">Focusing</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-38"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#FocusingWith"><span class="hs-identifier hs-type">FocusingWith</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-39"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#FocusingPlus"><span class="hs-identifier hs-type">FocusingPlus</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-40"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#FocusingOn"><span class="hs-identifier hs-type">FocusingOn</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-41"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#FocusingMay"><span class="hs-identifier hs-type">FocusingMay</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-42"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#FocusingErr"><span class="hs-identifier hs-type">FocusingErr</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-43"></a><span>
</span><a name="line-44"></a><span>  </span><span class="hs-comment">-- * Effect (used for 'Magnify')</span><span>
</span><a name="line-45"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#Effect"><span class="hs-identifier hs-type">Effect</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-46"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#EffectRWS"><span class="hs-identifier hs-type">EffectRWS</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-47"></a><span>
</span><a name="line-48"></a><span>  </span><span class="hs-comment">-- * Utilities</span><span>
</span><a name="line-49"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#May"><span class="hs-identifier hs-type">May</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-50"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#Err"><span class="hs-identifier hs-type">Err</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-51"></a><span class="hs-special">)</span><span>
</span><a name="line-52"></a><span class="hs-keyword">where</span><span>
</span><a name="line-53"></a><span>
</span><a name="line-54"></a><span>
</span><a name="line-55"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Applicative</span><span>
</span><a name="line-56"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span class="hs-operator">.</span><span class="hs-identifier">Reader</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Reader</span><span>
</span><a name="line-57"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span class="hs-operator">.</span><span class="hs-identifier">State</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">State</span><span>
</span><a name="line-58"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span class="hs-operator">.</span><span class="hs-identifier">Trans</span><span class="hs-operator">.</span><span class="hs-identifier">State</span><span class="hs-operator">.</span><span class="hs-identifier">Lazy</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Lazy</span><span>
</span><a name="line-59"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span class="hs-operator">.</span><span class="hs-identifier">Trans</span><span class="hs-operator">.</span><span class="hs-identifier">State</span><span class="hs-operator">.</span><span class="hs-identifier">Strict</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Strict</span><span>
</span><a name="line-60"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span class="hs-operator">.</span><span class="hs-identifier">Trans</span><span class="hs-operator">.</span><span class="hs-identifier">Writer</span><span class="hs-operator">.</span><span class="hs-identifier">Lazy</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Lazy</span><span>
</span><a name="line-61"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span class="hs-operator">.</span><span class="hs-identifier">Trans</span><span class="hs-operator">.</span><span class="hs-identifier">Writer</span><span class="hs-operator">.</span><span class="hs-identifier">Strict</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Strict</span><span>
</span><a name="line-62"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span class="hs-operator">.</span><span class="hs-identifier">Trans</span><span class="hs-operator">.</span><span class="hs-identifier">RWS</span><span class="hs-operator">.</span><span class="hs-identifier">Lazy</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Lazy</span><span>
</span><a name="line-63"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span class="hs-operator">.</span><span class="hs-identifier">Trans</span><span class="hs-operator">.</span><span class="hs-identifier">RWS</span><span class="hs-operator">.</span><span class="hs-identifier">Strict</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Strict</span><span>
</span><a name="line-64"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span class="hs-operator">.</span><span class="hs-identifier">Trans</span><span class="hs-operator">.</span><span class="hs-identifier">Error</span><span>
</span><a name="line-65"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span class="hs-operator">.</span><span class="hs-identifier">Trans</span><span class="hs-operator">.</span><span class="hs-identifier">Except</span><span>
</span><a name="line-66"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span class="hs-operator">.</span><span class="hs-identifier">Trans</span><span class="hs-operator">.</span><span class="hs-identifier">List</span><span>
</span><a name="line-67"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span class="hs-operator">.</span><span class="hs-identifier">Trans</span><span class="hs-operator">.</span><span class="hs-identifier">Identity</span><span>
</span><a name="line-68"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span class="hs-operator">.</span><span class="hs-identifier">Trans</span><span class="hs-operator">.</span><span class="hs-identifier">Maybe</span><span>
</span><a name="line-69"></a><span class="hs-comment">-- microlens</span><span>
</span><a name="line-70"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Lens</span><span class="hs-operator">.</span><span class="hs-identifier">Micro</span><span>
</span><a name="line-71"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Lens</span><span class="hs-operator">.</span><span class="hs-identifier">Micro</span><span class="hs-operator">.</span><span class="hs-identifier">Internal</span><span>
</span><a name="line-72"></a><span>
</span><a name="line-73"></a><span class="hs-cpp">#if __GLASGOW_HASKELL__ &lt; 710</span><span>
</span><a name="line-74"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Monoid</span><span>
</span><a name="line-75"></a><span class="hs-cpp">#endif</span><span>
</span><a name="line-76"></a><span>
</span><a name="line-77"></a><span>
</span><a name="line-78"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-79"></a><span class="hs-comment">-- Zoomed</span><span>
</span><a name="line-80"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-81"></a><span>
</span><a name="line-82"></a><span class="hs-comment">-- | This type family is used by 'Zoom' to describe the common effect type.</span><span>
</span><a name="line-83"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><a name="Zoomed"><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier">Zoomed</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679022199"><a href="#local-6989586621679022199"><span class="hs-identifier">m</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-operator hs-type">*</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-operator hs-type">*</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-operator hs-type">*</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-operator hs-type">*</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-operator hs-type">*</span><span>
</span><a name="line-84"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Strict</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">StateT</span><span> </span><a href="#local-6989586621679022456"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022457"><span class="hs-identifier hs-type">z</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Focusing"><span class="hs-identifier hs-type">Focusing</span></a><span> </span><a href="#local-6989586621679022457"><span class="hs-identifier hs-type">z</span></a><span>
</span><a name="line-85"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Lazy</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">StateT</span><span> </span><a href="#local-6989586621679022454"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022455"><span class="hs-identifier hs-type">z</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Focusing"><span class="hs-identifier hs-type">Focusing</span></a><span> </span><a href="#local-6989586621679022455"><span class="hs-identifier hs-type">z</span></a><span>
</span><a name="line-86"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">ReaderT</span><span> </span><a href="#local-6989586621679022452"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679022453"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><a href="#local-6989586621679022453"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-87"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">IdentityT</span><span> </span><a href="#local-6989586621679022451"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><a href="#local-6989586621679022451"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-88"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Strict</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">RWST</span><span> </span><a href="#local-6989586621679022447"><span class="hs-identifier hs-type">r</span></a><span> </span><a href="#local-6989586621679022448"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022449"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022450"><span class="hs-identifier hs-type">z</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingWith"><span class="hs-identifier hs-type">FocusingWith</span></a><span> </span><a href="#local-6989586621679022448"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022450"><span class="hs-identifier hs-type">z</span></a><span>
</span><a name="line-89"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Lazy</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">RWST</span><span> </span><a href="#local-6989586621679022443"><span class="hs-identifier hs-type">r</span></a><span> </span><a href="#local-6989586621679022444"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022445"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022446"><span class="hs-identifier hs-type">z</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingWith"><span class="hs-identifier hs-type">FocusingWith</span></a><span> </span><a href="#local-6989586621679022444"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022446"><span class="hs-identifier hs-type">z</span></a><span>
</span><a name="line-90"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Strict</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">WriterT</span><span> </span><a href="#local-6989586621679022441"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022442"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingPlus"><span class="hs-identifier hs-type">FocusingPlus</span></a><span> </span><a href="#local-6989586621679022441"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><a href="#local-6989586621679022442"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-91"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Lazy</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">WriterT</span><span> </span><a href="#local-6989586621679022439"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022440"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingPlus"><span class="hs-identifier hs-type">FocusingPlus</span></a><span> </span><a href="#local-6989586621679022439"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><a href="#local-6989586621679022440"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-92"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">ListT</span><span> </span><a href="#local-6989586621679022438"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingOn"><span class="hs-identifier hs-type">FocusingOn</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><a href="#local-6989586621679022438"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-93"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">MaybeT</span><span> </span><a href="#local-6989586621679022437"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingMay"><span class="hs-identifier hs-type">FocusingMay</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><a href="#local-6989586621679022437"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-94"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">ErrorT</span><span> </span><a href="#local-6989586621679022435"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679022436"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingErr"><span class="hs-identifier hs-type">FocusingErr</span></a><span> </span><a href="#local-6989586621679022435"><span class="hs-identifier hs-type">e</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><a href="#local-6989586621679022436"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-95"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">ExceptT</span><span> </span><a href="#local-6989586621679022433"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679022434"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingErr"><span class="hs-identifier hs-type">FocusingErr</span></a><span> </span><a href="#local-6989586621679022433"><span class="hs-identifier hs-type">e</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><a href="#local-6989586621679022434"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-96"></a><span>
</span><a name="line-97"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-98"></a><span class="hs-comment">-- Focusing</span><span>
</span><a name="line-99"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-100"></a><span>
</span><a name="line-101"></a><span class="hs-comment">-- | Used by 'Zoom' to 'zoom' into 'Control.Monad.State.StateT'.</span><span>
</span><a name="line-102"></a><span class="hs-keyword">newtype</span><span> </span><a name="Focusing"><a href="Lens.Micro.Mtl.Internal.html#Focusing"><span class="hs-identifier">Focusing</span></a></a><span> </span><a name="local-6989586621679022196"><a href="#local-6989586621679022196"><span class="hs-identifier">m</span></a></a><span> </span><a name="local-6989586621679022197"><a href="#local-6989586621679022197"><span class="hs-identifier">s</span></a></a><span> </span><a name="local-6989586621679022198"><a href="#local-6989586621679022198"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Focusing"><a href="Lens.Micro.Mtl.Internal.html#Focusing"><span class="hs-identifier">Focusing</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="unfocusing"><a href="Lens.Micro.Mtl.Internal.html#unfocusing"><span class="hs-identifier">unfocusing</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679022196"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022197"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679022198"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-103"></a><span>
</span><a name="line-104"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679022427"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Functor</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Focusing"><span class="hs-identifier hs-type">Focusing</span></a><span> </span><a href="#local-6989586621679022427"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022428"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-105"></a><span>  </span><a name="local-3458764513820541101"><span class="hs-identifier">fmap</span></a><span> </span><a name="local-6989586621679022429"><a href="#local-6989586621679022429"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Focusing"><span class="hs-identifier hs-var">Focusing</span></a><span> </span><a name="local-6989586621679022430"><a href="#local-6989586621679022430"><span class="hs-identifier">m</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Focusing"><span class="hs-identifier hs-var">Focusing</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-106"></a><span>     </span><span class="hs-special">(</span><a name="local-6989586621679022431"><a href="#local-6989586621679022431"><span class="hs-identifier">s</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679022432"><a href="#local-6989586621679022432"><span class="hs-identifier">a</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679022430"><span class="hs-identifier hs-var">m</span></a><span>
</span><a name="line-107"></a><span>     </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022431"><span class="hs-identifier hs-var">s</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679022429"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679022432"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-108"></a><span>  </span><span class="hs-pragma">{-# INLINE fmap #-}</span><span>
</span><a name="line-109"></a><span>
</span><a name="line-110"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679022418"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Monoid</span><span> </span><a href="#local-6989586621679022419"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Applicative</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Focusing"><span class="hs-identifier hs-type">Focusing</span></a><span> </span><a href="#local-6989586621679022418"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022419"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-111"></a><span>  </span><a name="local-3458764513820541680"><span class="hs-identifier">pure</span></a><span> </span><a name="local-6989586621679022420"><a href="#local-6989586621679022420"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Focusing"><span class="hs-identifier hs-var">Focusing</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">mempty</span><span class="hs-special">,</span><span> </span><a href="#local-6989586621679022420"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-112"></a><span>  </span><span class="hs-pragma">{-# INLINE pure #-}</span><span>
</span><a name="line-113"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#Focusing"><span class="hs-identifier hs-var">Focusing</span></a><span> </span><a name="local-6989586621679022421"><a href="#local-6989586621679022421"><span class="hs-identifier">mf</span></a></a><span> </span><a name="local-3458764513820541679"><span class="hs-operator">&lt;*&gt;</span></a><span> </span><a href="Lens.Micro.Mtl.Internal.html#Focusing"><span class="hs-identifier hs-var">Focusing</span></a><span> </span><a name="local-6989586621679022422"><a href="#local-6989586621679022422"><span class="hs-identifier">ma</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Focusing"><span class="hs-identifier hs-var">Focusing</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-114"></a><span>    </span><span class="hs-special">(</span><a name="local-6989586621679022423"><a href="#local-6989586621679022423"><span class="hs-identifier">s</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679022424"><a href="#local-6989586621679022424"><span class="hs-identifier">f</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679022421"><span class="hs-identifier hs-var">mf</span></a><span>
</span><a name="line-115"></a><span>    </span><span class="hs-special">(</span><a name="local-6989586621679022425"><a href="#local-6989586621679022425"><span class="hs-identifier">s'</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679022426"><a href="#local-6989586621679022426"><span class="hs-identifier">a</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679022422"><span class="hs-identifier hs-var">ma</span></a><span>
</span><a name="line-116"></a><span>    </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">mappend</span><span> </span><a href="#local-6989586621679022423"><span class="hs-identifier hs-var">s</span></a><span> </span><a href="#local-6989586621679022425"><span class="hs-identifier hs-var">s'</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679022424"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679022426"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-117"></a><span>  </span><span class="hs-pragma">{-# INLINE (&lt;*&gt;) #-}</span><span>
</span><a name="line-118"></a><span>
</span><a name="line-119"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-120"></a><span class="hs-comment">-- FocusingWith</span><span>
</span><a name="line-121"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-122"></a><span>
</span><a name="line-123"></a><span class="hs-comment">-- | Used by 'Zoom' to 'zoom' into 'Control.Monad.RWS.RWST'.</span><span>
</span><a name="line-124"></a><span class="hs-keyword">newtype</span><span> </span><a name="FocusingWith"><a href="Lens.Micro.Mtl.Internal.html#FocusingWith"><span class="hs-identifier">FocusingWith</span></a></a><span> </span><a name="local-6989586621679022192"><a href="#local-6989586621679022192"><span class="hs-identifier">w</span></a></a><span> </span><a name="local-6989586621679022193"><a href="#local-6989586621679022193"><span class="hs-identifier">m</span></a></a><span> </span><a name="local-6989586621679022194"><a href="#local-6989586621679022194"><span class="hs-identifier">s</span></a></a><span> </span><a name="local-6989586621679022195"><a href="#local-6989586621679022195"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="FocusingWith"><a href="Lens.Micro.Mtl.Internal.html#FocusingWith"><span class="hs-identifier">FocusingWith</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="unfocusingWith"><a href="Lens.Micro.Mtl.Internal.html#unfocusingWith"><span class="hs-identifier">unfocusingWith</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679022193"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022194"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679022195"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679022192"><span class="hs-identifier hs-type">w</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-125"></a><span>
</span><a name="line-126"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679022410"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Functor</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingWith"><span class="hs-identifier hs-type">FocusingWith</span></a><span> </span><a href="#local-6989586621679022411"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022410"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022412"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-127"></a><span>  </span><a name="local-3458764513820541101"><span class="hs-identifier">fmap</span></a><span> </span><a name="local-6989586621679022413"><a href="#local-6989586621679022413"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingWith"><span class="hs-identifier hs-var">FocusingWith</span></a><span> </span><a name="local-6989586621679022414"><a href="#local-6989586621679022414"><span class="hs-identifier">m</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingWith"><span class="hs-identifier hs-var">FocusingWith</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-128"></a><span>     </span><span class="hs-special">(</span><a name="local-6989586621679022415"><a href="#local-6989586621679022415"><span class="hs-identifier">s</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679022416"><a href="#local-6989586621679022416"><span class="hs-identifier">a</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679022417"><a href="#local-6989586621679022417"><span class="hs-identifier">w</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679022414"><span class="hs-identifier hs-var">m</span></a><span>
</span><a name="line-129"></a><span>     </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022415"><span class="hs-identifier hs-var">s</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679022413"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679022416"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679022417"><span class="hs-identifier hs-var">w</span></a><span class="hs-special">)</span><span>
</span><a name="line-130"></a><span>  </span><span class="hs-pragma">{-# INLINE fmap #-}</span><span>
</span><a name="line-131"></a><span>
</span><a name="line-132"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679022398"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Monoid</span><span> </span><a href="#local-6989586621679022399"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Monoid</span><span> </span><a href="#local-6989586621679022400"><span class="hs-identifier hs-type">w</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Applicative</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingWith"><span class="hs-identifier hs-type">FocusingWith</span></a><span> </span><a href="#local-6989586621679022400"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022398"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022399"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-133"></a><span>  </span><a name="local-3458764513820541680"><span class="hs-identifier">pure</span></a><span> </span><a name="local-6989586621679022401"><a href="#local-6989586621679022401"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingWith"><span class="hs-identifier hs-var">FocusingWith</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">mempty</span><span class="hs-special">,</span><span> </span><a href="#local-6989586621679022401"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">mempty</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-134"></a><span>  </span><span class="hs-pragma">{-# INLINE pure #-}</span><span>
</span><a name="line-135"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#FocusingWith"><span class="hs-identifier hs-var">FocusingWith</span></a><span> </span><a name="local-6989586621679022402"><a href="#local-6989586621679022402"><span class="hs-identifier">mf</span></a></a><span> </span><a name="local-3458764513820541679"><span class="hs-operator">&lt;*&gt;</span></a><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingWith"><span class="hs-identifier hs-var">FocusingWith</span></a><span> </span><a name="local-6989586621679022403"><a href="#local-6989586621679022403"><span class="hs-identifier">ma</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingWith"><span class="hs-identifier hs-var">FocusingWith</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-136"></a><span>    </span><span class="hs-special">(</span><a name="local-6989586621679022404"><a href="#local-6989586621679022404"><span class="hs-identifier">s</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679022405"><a href="#local-6989586621679022405"><span class="hs-identifier">f</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679022406"><a href="#local-6989586621679022406"><span class="hs-identifier">w</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679022402"><span class="hs-identifier hs-var">mf</span></a><span>
</span><a name="line-137"></a><span>    </span><span class="hs-special">(</span><a name="local-6989586621679022407"><a href="#local-6989586621679022407"><span class="hs-identifier">s'</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679022408"><a href="#local-6989586621679022408"><span class="hs-identifier">a</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679022409"><a href="#local-6989586621679022409"><span class="hs-identifier">w'</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679022403"><span class="hs-identifier hs-var">ma</span></a><span>
</span><a name="line-138"></a><span>    </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">mappend</span><span> </span><a href="#local-6989586621679022404"><span class="hs-identifier hs-var">s</span></a><span> </span><a href="#local-6989586621679022407"><span class="hs-identifier hs-var">s'</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679022405"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679022408"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">mappend</span><span> </span><a href="#local-6989586621679022406"><span class="hs-identifier hs-var">w</span></a><span> </span><a href="#local-6989586621679022409"><span class="hs-identifier hs-var">w'</span></a><span class="hs-special">)</span><span>
</span><a name="line-139"></a><span>  </span><span class="hs-pragma">{-# INLINE (&lt;*&gt;) #-}</span><span>
</span><a name="line-140"></a><span>
</span><a name="line-141"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-142"></a><span class="hs-comment">-- FocusingPlus</span><span>
</span><a name="line-143"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-144"></a><span>
</span><a name="line-145"></a><span class="hs-comment">-- | Used by 'Zoom' to 'zoom' into 'Control.Monad.Writer.WriterT'.</span><span>
</span><a name="line-146"></a><span class="hs-keyword">newtype</span><span> </span><a name="FocusingPlus"><a href="Lens.Micro.Mtl.Internal.html#FocusingPlus"><span class="hs-identifier">FocusingPlus</span></a></a><span> </span><a name="local-6989586621679022188"><a href="#local-6989586621679022188"><span class="hs-identifier">w</span></a></a><span> </span><a name="local-6989586621679022189"><a href="#local-6989586621679022189"><span class="hs-identifier">k</span></a></a><span> </span><a name="local-6989586621679022190"><a href="#local-6989586621679022190"><span class="hs-identifier">s</span></a></a><span> </span><a name="local-6989586621679022191"><a href="#local-6989586621679022191"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="FocusingPlus"><a href="Lens.Micro.Mtl.Internal.html#FocusingPlus"><span class="hs-identifier">FocusingPlus</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="unfocusingPlus"><a href="Lens.Micro.Mtl.Internal.html#unfocusingPlus"><span class="hs-identifier">unfocusingPlus</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679022189"><span class="hs-identifier hs-type">k</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022190"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679022188"><span class="hs-identifier hs-type">w</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022191"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-147"></a><span>
</span><a name="line-148"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Functor</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022393"><span class="hs-identifier hs-type">k</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022394"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679022395"><span class="hs-identifier hs-type">w</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Functor</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingPlus"><span class="hs-identifier hs-type">FocusingPlus</span></a><span> </span><a href="#local-6989586621679022395"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022393"><span class="hs-identifier hs-type">k</span></a><span> </span><a href="#local-6989586621679022394"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-149"></a><span>  </span><a name="local-3458764513820541101"><span class="hs-identifier">fmap</span></a><span> </span><a name="local-6989586621679022396"><a href="#local-6989586621679022396"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingPlus"><span class="hs-identifier hs-var">FocusingPlus</span></a><span> </span><span class="hs-keyword">as</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingPlus"><span class="hs-identifier hs-var">FocusingPlus</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fmap</span><span> </span><a href="#local-6989586621679022396"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-keyword">as</span><span class="hs-special">)</span><span>
</span><a name="line-150"></a><span>  </span><span class="hs-pragma">{-# INLINE fmap #-}</span><span>
</span><a name="line-151"></a><span>
</span><a name="line-152"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Applicative</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022388"><span class="hs-identifier hs-type">k</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022389"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679022390"><span class="hs-identifier hs-type">w</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Applicative</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingPlus"><span class="hs-identifier hs-type">FocusingPlus</span></a><span> </span><a href="#local-6989586621679022390"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022388"><span class="hs-identifier hs-type">k</span></a><span> </span><a href="#local-6989586621679022389"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-153"></a><span>  </span><a name="local-3458764513820541680"><span class="hs-identifier">pure</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingPlus"><span class="hs-identifier hs-var">FocusingPlus</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">pure</span><span>
</span><a name="line-154"></a><span>  </span><span class="hs-pragma">{-# INLINE pure #-}</span><span>
</span><a name="line-155"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#FocusingPlus"><span class="hs-identifier hs-var">FocusingPlus</span></a><span> </span><a name="local-6989586621679022391"><a href="#local-6989586621679022391"><span class="hs-identifier">kf</span></a></a><span> </span><a name="local-3458764513820541679"><span class="hs-operator">&lt;*&gt;</span></a><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingPlus"><span class="hs-identifier hs-var">FocusingPlus</span></a><span> </span><a name="local-6989586621679022392"><a href="#local-6989586621679022392"><span class="hs-identifier">ka</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingPlus"><span class="hs-identifier hs-var">FocusingPlus</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022391"><span class="hs-identifier hs-var">kf</span></a><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="#local-6989586621679022392"><span class="hs-identifier hs-var">ka</span></a><span class="hs-special">)</span><span>
</span><a name="line-156"></a><span>  </span><span class="hs-pragma">{-# INLINE (&lt;*&gt;) #-}</span><span>
</span><a name="line-157"></a><span>
</span><a name="line-158"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-159"></a><span class="hs-comment">-- FocusingOn</span><span>
</span><a name="line-160"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-161"></a><span>
</span><a name="line-162"></a><span class="hs-comment">-- | Used by 'Zoom' to 'zoom' into 'Control.Monad.Trans.Maybe.MaybeT' or 'Control.Monad.Trans.List.ListT'.</span><span>
</span><a name="line-163"></a><span class="hs-keyword">newtype</span><span> </span><a name="FocusingOn"><a href="Lens.Micro.Mtl.Internal.html#FocusingOn"><span class="hs-identifier">FocusingOn</span></a></a><span> </span><a name="local-6989586621679022184"><a href="#local-6989586621679022184"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621679022185"><a href="#local-6989586621679022185"><span class="hs-identifier">k</span></a></a><span> </span><a name="local-6989586621679022186"><a href="#local-6989586621679022186"><span class="hs-identifier">s</span></a></a><span> </span><a name="local-6989586621679022187"><a href="#local-6989586621679022187"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="FocusingOn"><a href="Lens.Micro.Mtl.Internal.html#FocusingOn"><span class="hs-identifier">FocusingOn</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="unfocusingOn"><a href="Lens.Micro.Mtl.Internal.html#unfocusingOn"><span class="hs-identifier">unfocusingOn</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679022185"><span class="hs-identifier hs-type">k</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022184"><span class="hs-identifier hs-type">f</span></a><span> </span><a href="#local-6989586621679022186"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022187"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-164"></a><span>
</span><a name="line-165"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Functor</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022383"><span class="hs-identifier hs-type">k</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022384"><span class="hs-identifier hs-type">f</span></a><span> </span><a href="#local-6989586621679022385"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Functor</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingOn"><span class="hs-identifier hs-type">FocusingOn</span></a><span> </span><a href="#local-6989586621679022384"><span class="hs-identifier hs-type">f</span></a><span> </span><a href="#local-6989586621679022383"><span class="hs-identifier hs-type">k</span></a><span> </span><a href="#local-6989586621679022385"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-166"></a><span>  </span><a name="local-3458764513820541101"><span class="hs-identifier">fmap</span></a><span> </span><a name="local-6989586621679022386"><a href="#local-6989586621679022386"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingOn"><span class="hs-identifier hs-var">FocusingOn</span></a><span> </span><span class="hs-keyword">as</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingOn"><span class="hs-identifier hs-var">FocusingOn</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fmap</span><span> </span><a href="#local-6989586621679022386"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-keyword">as</span><span class="hs-special">)</span><span>
</span><a name="line-167"></a><span>  </span><span class="hs-pragma">{-# INLINE fmap #-}</span><span>
</span><a name="line-168"></a><span>
</span><a name="line-169"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Applicative</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022378"><span class="hs-identifier hs-type">k</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022379"><span class="hs-identifier hs-type">f</span></a><span> </span><a href="#local-6989586621679022380"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Applicative</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingOn"><span class="hs-identifier hs-type">FocusingOn</span></a><span> </span><a href="#local-6989586621679022379"><span class="hs-identifier hs-type">f</span></a><span> </span><a href="#local-6989586621679022378"><span class="hs-identifier hs-type">k</span></a><span> </span><a href="#local-6989586621679022380"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-170"></a><span>  </span><a name="local-3458764513820541680"><span class="hs-identifier">pure</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingOn"><span class="hs-identifier hs-var">FocusingOn</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">pure</span><span>
</span><a name="line-171"></a><span>  </span><span class="hs-pragma">{-# INLINE pure #-}</span><span>
</span><a name="line-172"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#FocusingOn"><span class="hs-identifier hs-var">FocusingOn</span></a><span> </span><a name="local-6989586621679022381"><a href="#local-6989586621679022381"><span class="hs-identifier">kf</span></a></a><span> </span><a name="local-3458764513820541679"><span class="hs-operator">&lt;*&gt;</span></a><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingOn"><span class="hs-identifier hs-var">FocusingOn</span></a><span> </span><a name="local-6989586621679022382"><a href="#local-6989586621679022382"><span class="hs-identifier">ka</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingOn"><span class="hs-identifier hs-var">FocusingOn</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022381"><span class="hs-identifier hs-var">kf</span></a><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="#local-6989586621679022382"><span class="hs-identifier hs-var">ka</span></a><span class="hs-special">)</span><span>
</span><a name="line-173"></a><span>  </span><span class="hs-pragma">{-# INLINE (&lt;*&gt;) #-}</span><span>
</span><a name="line-174"></a><span>
</span><a name="line-175"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-176"></a><span class="hs-comment">-- May</span><span>
</span><a name="line-177"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-178"></a><span>
</span><a name="line-179"></a><span class="hs-comment">-- | Make a 'Monoid' out of 'Maybe' for error handling.</span><span>
</span><a name="line-180"></a><span class="hs-keyword">newtype</span><span> </span><a name="May"><a href="Lens.Micro.Mtl.Internal.html#May"><span class="hs-identifier">May</span></a></a><span> </span><a name="local-6989586621679022183"><a href="#local-6989586621679022183"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="May"><a href="Lens.Micro.Mtl.Internal.html#May"><span class="hs-identifier">May</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="getMay"><a href="Lens.Micro.Mtl.Internal.html#getMay"><span class="hs-identifier">getMay</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679022183"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-181"></a><span>
</span><a name="line-182"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Monoid</span><span> </span><a href="#local-6989586621679022375"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Monoid</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#May"><span class="hs-identifier hs-type">May</span></a><span> </span><a href="#local-6989586621679022375"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-183"></a><span>  </span><a name="local-3458764513820541442"><span class="hs-identifier">mempty</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#May"><span class="hs-identifier hs-var">May</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-identifier hs-var">mempty</span><span class="hs-special">)</span><span>
</span><a name="line-184"></a><span>  </span><span class="hs-pragma">{-# INLINE mempty #-}</span><span>
</span><a name="line-185"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#May"><span class="hs-identifier hs-var">May</span></a><span> </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-special">`</span><a name="local-3458764513820541443"><span class="hs-identifier">mappend</span></a><span class="hs-special">`</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#May"><span class="hs-identifier hs-var">May</span></a><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-186"></a><span>  </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">`</span><span class="hs-identifier">mappend</span><span class="hs-special">`</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#May"><span class="hs-identifier hs-var">May</span></a><span> </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#May"><span class="hs-identifier hs-var">May</span></a><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-187"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#May"><span class="hs-identifier hs-var">May</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679022376"><a href="#local-6989586621679022376"><span class="hs-identifier">a</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-special">`</span><span class="hs-identifier">mappend</span><span class="hs-special">`</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#May"><span class="hs-identifier hs-var">May</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679022377"><a href="#local-6989586621679022377"><span class="hs-identifier">b</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#May"><span class="hs-identifier hs-var">May</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">mappend</span><span> </span><a href="#local-6989586621679022376"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679022377"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-188"></a><span>  </span><span class="hs-pragma">{-# INLINE mappend #-}</span><span>
</span><a name="line-189"></a><span>
</span><a name="line-190"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-191"></a><span class="hs-comment">-- FocusingMay</span><span>
</span><a name="line-192"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-193"></a><span>
</span><a name="line-194"></a><span class="hs-comment">-- | Used by 'Zoom' to 'zoom' into 'Control.Monad.Error.ErrorT'.</span><span>
</span><a name="line-195"></a><span class="hs-keyword">newtype</span><span> </span><a name="FocusingMay"><a href="Lens.Micro.Mtl.Internal.html#FocusingMay"><span class="hs-identifier">FocusingMay</span></a></a><span> </span><a name="local-6989586621679022180"><a href="#local-6989586621679022180"><span class="hs-identifier">k</span></a></a><span> </span><a name="local-6989586621679022181"><a href="#local-6989586621679022181"><span class="hs-identifier">s</span></a></a><span> </span><a name="local-6989586621679022182"><a href="#local-6989586621679022182"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="FocusingMay"><a href="Lens.Micro.Mtl.Internal.html#FocusingMay"><span class="hs-identifier">FocusingMay</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="unfocusingMay"><a href="Lens.Micro.Mtl.Internal.html#unfocusingMay"><span class="hs-identifier">unfocusingMay</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679022180"><span class="hs-identifier hs-type">k</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#May"><span class="hs-identifier hs-type">May</span></a><span> </span><a href="#local-6989586621679022181"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022182"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-196"></a><span>
</span><a name="line-197"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Functor</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022371"><span class="hs-identifier hs-type">k</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#May"><span class="hs-identifier hs-type">May</span></a><span> </span><a href="#local-6989586621679022372"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Functor</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingMay"><span class="hs-identifier hs-type">FocusingMay</span></a><span> </span><a href="#local-6989586621679022371"><span class="hs-identifier hs-type">k</span></a><span> </span><a href="#local-6989586621679022372"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-198"></a><span>  </span><a name="local-3458764513820541101"><span class="hs-identifier">fmap</span></a><span> </span><a name="local-6989586621679022373"><a href="#local-6989586621679022373"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingMay"><span class="hs-identifier hs-var">FocusingMay</span></a><span> </span><span class="hs-keyword">as</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingMay"><span class="hs-identifier hs-var">FocusingMay</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fmap</span><span> </span><a href="#local-6989586621679022373"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-keyword">as</span><span class="hs-special">)</span><span>
</span><a name="line-199"></a><span>  </span><span class="hs-pragma">{-# INLINE fmap #-}</span><span>
</span><a name="line-200"></a><span>
</span><a name="line-201"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Applicative</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022367"><span class="hs-identifier hs-type">k</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#May"><span class="hs-identifier hs-type">May</span></a><span> </span><a href="#local-6989586621679022368"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Applicative</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingMay"><span class="hs-identifier hs-type">FocusingMay</span></a><span> </span><a href="#local-6989586621679022367"><span class="hs-identifier hs-type">k</span></a><span> </span><a href="#local-6989586621679022368"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-202"></a><span>  </span><a name="local-3458764513820541680"><span class="hs-identifier">pure</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingMay"><span class="hs-identifier hs-var">FocusingMay</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">pure</span><span>
</span><a name="line-203"></a><span>  </span><span class="hs-pragma">{-# INLINE pure #-}</span><span>
</span><a name="line-204"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#FocusingMay"><span class="hs-identifier hs-var">FocusingMay</span></a><span> </span><a name="local-6989586621679022369"><a href="#local-6989586621679022369"><span class="hs-identifier">kf</span></a></a><span> </span><a name="local-3458764513820541679"><span class="hs-operator">&lt;*&gt;</span></a><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingMay"><span class="hs-identifier hs-var">FocusingMay</span></a><span> </span><a name="local-6989586621679022370"><a href="#local-6989586621679022370"><span class="hs-identifier">ka</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingMay"><span class="hs-identifier hs-var">FocusingMay</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022369"><span class="hs-identifier hs-var">kf</span></a><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="#local-6989586621679022370"><span class="hs-identifier hs-var">ka</span></a><span class="hs-special">)</span><span>
</span><a name="line-205"></a><span>  </span><span class="hs-pragma">{-# INLINE (&lt;*&gt;) #-}</span><span>
</span><a name="line-206"></a><span>
</span><a name="line-207"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-208"></a><span class="hs-comment">-- Err</span><span>
</span><a name="line-209"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-210"></a><span>
</span><a name="line-211"></a><span class="hs-comment">-- | Make a 'Monoid' out of 'Either' for error handling.</span><span>
</span><a name="line-212"></a><span class="hs-keyword">newtype</span><span> </span><a name="Err"><a href="Lens.Micro.Mtl.Internal.html#Err"><span class="hs-identifier">Err</span></a></a><span> </span><a name="local-6989586621679022178"><a href="#local-6989586621679022178"><span class="hs-identifier">e</span></a></a><span> </span><a name="local-6989586621679022179"><a href="#local-6989586621679022179"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Err"><a href="Lens.Micro.Mtl.Internal.html#Err"><span class="hs-identifier">Err</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="getErr"><a href="Lens.Micro.Mtl.Internal.html#getErr"><span class="hs-identifier">getErr</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Either</span><span> </span><a href="#local-6989586621679022178"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679022179"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-213"></a><span>
</span><a name="line-214"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Monoid</span><span> </span><a href="#local-6989586621679022361"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Monoid</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Err"><span class="hs-identifier hs-type">Err</span></a><span> </span><a href="#local-6989586621679022362"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679022361"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-215"></a><span>  </span><a name="local-3458764513820541442"><span class="hs-identifier">mempty</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Err"><span class="hs-identifier hs-var">Err</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-identifier hs-var">mempty</span><span class="hs-special">)</span><span>
</span><a name="line-216"></a><span>  </span><span class="hs-pragma">{-# INLINE mempty #-}</span><span>
</span><a name="line-217"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#Err"><span class="hs-identifier hs-var">Err</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Left</span><span> </span><a name="local-6989586621679022363"><a href="#local-6989586621679022363"><span class="hs-identifier">e</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-special">`</span><a name="local-3458764513820541443"><span class="hs-identifier">mappend</span></a><span class="hs-special">`</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Err"><span class="hs-identifier hs-var">Err</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Left</span><span> </span><a href="#local-6989586621679022363"><span class="hs-identifier hs-var">e</span></a><span class="hs-special">)</span><span>
</span><a name="line-218"></a><span>  </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">`</span><span class="hs-identifier">mappend</span><span class="hs-special">`</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Err"><span class="hs-identifier hs-var">Err</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Left</span><span> </span><a name="local-6989586621679022364"><a href="#local-6989586621679022364"><span class="hs-identifier">e</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Err"><span class="hs-identifier hs-var">Err</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Left</span><span> </span><a href="#local-6989586621679022364"><span class="hs-identifier hs-var">e</span></a><span class="hs-special">)</span><span>
</span><a name="line-219"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#Err"><span class="hs-identifier hs-var">Err</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Right</span><span> </span><a name="local-6989586621679022365"><a href="#local-6989586621679022365"><span class="hs-identifier">a</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-special">`</span><span class="hs-identifier">mappend</span><span class="hs-special">`</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Err"><span class="hs-identifier hs-var">Err</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Right</span><span> </span><a name="local-6989586621679022366"><a href="#local-6989586621679022366"><span class="hs-identifier">b</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Err"><span class="hs-identifier hs-var">Err</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">mappend</span><span> </span><a href="#local-6989586621679022365"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679022366"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-220"></a><span>  </span><span class="hs-pragma">{-# INLINE mappend #-}</span><span>
</span><a name="line-221"></a><span>
</span><a name="line-222"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-223"></a><span class="hs-comment">-- FocusingErr</span><span>
</span><a name="line-224"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-225"></a><span>
</span><a name="line-226"></a><span class="hs-comment">-- | Used by 'Zoom' to 'zoom' into 'Control.Monad.Error.ErrorT'.</span><span>
</span><a name="line-227"></a><span class="hs-keyword">newtype</span><span> </span><a name="FocusingErr"><a href="Lens.Micro.Mtl.Internal.html#FocusingErr"><span class="hs-identifier">FocusingErr</span></a></a><span> </span><a name="local-6989586621679022174"><a href="#local-6989586621679022174"><span class="hs-identifier">e</span></a></a><span> </span><a name="local-6989586621679022175"><a href="#local-6989586621679022175"><span class="hs-identifier">k</span></a></a><span> </span><a name="local-6989586621679022176"><a href="#local-6989586621679022176"><span class="hs-identifier">s</span></a></a><span> </span><a name="local-6989586621679022177"><a href="#local-6989586621679022177"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="FocusingErr"><a href="Lens.Micro.Mtl.Internal.html#FocusingErr"><span class="hs-identifier">FocusingErr</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="unfocusingErr"><a href="Lens.Micro.Mtl.Internal.html#unfocusingErr"><span class="hs-identifier">unfocusingErr</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679022175"><span class="hs-identifier hs-type">k</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Err"><span class="hs-identifier hs-type">Err</span></a><span> </span><a href="#local-6989586621679022174"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679022176"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022177"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-228"></a><span>
</span><a name="line-229"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Functor</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022356"><span class="hs-identifier hs-type">k</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Err"><span class="hs-identifier hs-type">Err</span></a><span> </span><a href="#local-6989586621679022357"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679022358"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Functor</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingErr"><span class="hs-identifier hs-type">FocusingErr</span></a><span> </span><a href="#local-6989586621679022357"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679022356"><span class="hs-identifier hs-type">k</span></a><span> </span><a href="#local-6989586621679022358"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-230"></a><span>  </span><a name="local-3458764513820541101"><span class="hs-identifier">fmap</span></a><span> </span><a name="local-6989586621679022359"><a href="#local-6989586621679022359"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingErr"><span class="hs-identifier hs-var">FocusingErr</span></a><span> </span><span class="hs-keyword">as</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingErr"><span class="hs-identifier hs-var">FocusingErr</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fmap</span><span> </span><a href="#local-6989586621679022359"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-keyword">as</span><span class="hs-special">)</span><span>
</span><a name="line-231"></a><span>  </span><span class="hs-pragma">{-# INLINE fmap #-}</span><span>
</span><a name="line-232"></a><span>
</span><a name="line-233"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Applicative</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022351"><span class="hs-identifier hs-type">k</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Err"><span class="hs-identifier hs-type">Err</span></a><span> </span><a href="#local-6989586621679022352"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679022353"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Applicative</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingErr"><span class="hs-identifier hs-type">FocusingErr</span></a><span> </span><a href="#local-6989586621679022352"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679022351"><span class="hs-identifier hs-type">k</span></a><span> </span><a href="#local-6989586621679022353"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-234"></a><span>  </span><a name="local-3458764513820541680"><span class="hs-identifier">pure</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingErr"><span class="hs-identifier hs-var">FocusingErr</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">pure</span><span>
</span><a name="line-235"></a><span>  </span><span class="hs-pragma">{-# INLINE pure #-}</span><span>
</span><a name="line-236"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#FocusingErr"><span class="hs-identifier hs-var">FocusingErr</span></a><span> </span><a name="local-6989586621679022354"><a href="#local-6989586621679022354"><span class="hs-identifier">kf</span></a></a><span> </span><a name="local-3458764513820541679"><span class="hs-operator">&lt;*&gt;</span></a><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingErr"><span class="hs-identifier hs-var">FocusingErr</span></a><span> </span><a name="local-6989586621679022355"><a href="#local-6989586621679022355"><span class="hs-identifier">ka</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#FocusingErr"><span class="hs-identifier hs-var">FocusingErr</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679022354"><span class="hs-identifier hs-var">kf</span></a><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="#local-6989586621679022355"><span class="hs-identifier hs-var">ka</span></a><span class="hs-special">)</span><span>
</span><a name="line-237"></a><span>  </span><span class="hs-pragma">{-# INLINE (&lt;*&gt;) #-}</span><span>
</span><a name="line-238"></a><span>
</span><a name="line-239"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-240"></a><span class="hs-comment">-- Zoom</span><span>
</span><a name="line-241"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-242"></a><span>
</span><a name="line-243"></a><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">2</span><span> </span><span class="hs-special">`</span><span class="hs-identifier">zoom</span><span class="hs-special">`</span><span>
</span><a name="line-244"></a><span>
</span><a name="line-245"></a><span class="hs-keyword">class</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><a href="#local-6989586621679022169"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">~</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><a href="#local-6989586621679022170"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">MonadState</span><span> </span><a href="#local-6989586621679022171"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022169"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">MonadState</span><span> </span><a href="#local-6989586621679022172"><span class="hs-identifier hs-type">t</span></a><span> </span><a href="#local-6989586621679022170"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a name="Zoom"><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier">Zoom</span></a></a><span> </span><a name="local-6989586621679022169"><a href="#local-6989586621679022169"><span class="hs-identifier">m</span></a></a><span> </span><a name="local-6989586621679022170"><a href="#local-6989586621679022170"><span class="hs-identifier">n</span></a></a><span> </span><a name="local-6989586621679022171"><a href="#local-6989586621679022171"><span class="hs-identifier">s</span></a></a><span> </span><a name="local-6989586621679022172"><a href="#local-6989586621679022172"><span class="hs-identifier">t</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">s</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">n</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">t</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-identifier">t</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">n</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">n</span><span> </span><span class="hs-identifier">s</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-246"></a><span>  </span><span class="hs-comment">{- |
When you're in a state monad, this function lets you operate on a part of your state. For instance, if your state was a record containing a @position@ field, after zooming @position@ would become your whole state (and when you modify it, the bigger structure would be modified as well).

(Your 'Lazy.State' \/ 'Lazy.StateT' or 'Lazy.RWS' \/ 'Lazy.RWST' can be anywhere in the stack, but you can't use 'zoom' with arbitrary 'MonadState' because it doesn't provide any methods to change the type of the state. See &lt;https://github.com/ekmett/lens/issues/316 this issue&gt; for details.)

For the sake of the example, let's define some types first:

@
data Position = Position {
  _x, _y :: Int }

data Player = Player {
  _position :: Position,
  ... }

data Game = Game {
  _player :: Player,
  _obstacles :: [Position],
  ... }

concat \&lt;$\&gt; mapM makeLenses [''Position, ''Player, ''Game]
@

Now, here's an action that moves the player north-east:

@
moveNE :: 'Lazy.State' Game ()
moveNE = do
  player.position.x 'Lens.Micro.Mtl.+=' 1
  player.position.y 'Lens.Micro.Mtl.+=' 1
@

With 'zoom', you can use @player.position@ to focus just on a part of the state:

@
moveNE :: 'Lazy.State' Game ()
moveNE = do
  'zoom' (player.position) $ do
    x 'Lens.Micro.Mtl.+=' 1
    y 'Lens.Micro.Mtl.+=' 1
@

You can just as well use it for retrieving things out of the state:

@
getCoords :: 'Lazy.State' Game (Int, Int)
getCoords = 'zoom' (player.position) ((,) '&lt;$&gt;' 'Lens.Micro.Mtl.use' x '&lt;*&gt;' 'Lens.Micro.Mtl.use' y)
@

Or more explicitly:

@
getCoords = 'zoom' (player.position) $ do
  x' &lt;- 'Lens.Micro.Mtl.use' x
  y' &lt;- 'Lens.Micro.Mtl.use' y
  return (x', y')
@

When you pass a traversal to 'zoom', it'll work as a loop. For instance, here we move all obstacles:

@
moveObstaclesNE :: 'Lazy.State' Game ()
moveObstaclesNE = do
  'zoom' (obstacles.'each') $ do
    x 'Lens.Micro.Mtl.+=' 1
    y 'Lens.Micro.Mtl.+=' 1
@

If the action returns a result, all results would be combined with '&lt;&gt;' &#8211; the same way they're combined when '^.' is passed a traversal. In this example, @moveObstaclesNE@ returns a list of old coordinates of obstacles in addition to moving them:

@
moveObstaclesNE = do
  xys &lt;- 'zoom' (obstacles.'each') $ do
    -- Get old coordinates.
    x' &lt;- 'Lens.Micro.Mtl.use' x
    y' &lt;- 'Lens.Micro.Mtl.use' y
    -- Update them.
    x 'Lens.Micro.Mtl..=' x' + 1
    y 'Lens.Micro.Mtl..=' y' + 1
    -- Return a single-element list with old coordinates.
    return [(x', y')]
  ...
@

Finally, you might need to write your own instances of 'Zoom' if you use @newtype@d transformers in your monad stack. This can be done as follows:

@
import &quot;Lens.Micro.Mtl.Internal&quot;

type instance 'Zoomed' (MyStateT s m) = 'Zoomed' (StateT s m)

instance Monad m =\&gt; 'Zoom' (MyStateT s m) (MyStateT t m) s t where
    'zoom' l (MyStateT m) = MyStateT ('zoom' l m)
@
  -}</span><span>
</span><a name="line-341"></a><span>  </span><span class="hs-identifier">zoom</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">LensLike'</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Zoomed"><span class="hs-identifier hs-type">Zoomed</span></a><span> </span><a href="#local-6989586621679022169"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022173"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022172"><span class="hs-identifier hs-type">t</span></a><span> </span><a href="#local-6989586621679022171"><span class="hs-identifier hs-type">s</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679022169"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022173"><span class="hs-identifier hs-type">c</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679022170"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679022173"><span class="hs-identifier hs-type">c</span></a><span>
</span><a name="line-342"></a><span>
</span><a name="line-343"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679022346"><span class="hs-identifier hs-type">z</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Strict</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">StateT</span><span> </span><a href="#local-6989586621679022347"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022346"><span class="hs-identifier hs-type">z</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Strict</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">StateT</span><span> </span><a href="#local-6989586621679022348"><span class="hs-identifier hs-type">t</span></a><span> </span><a href="#local-6989586621679022346"><span class="hs-identifier hs-type">z</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022347"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022348"><span class="hs-identifier hs-type">t</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-344"></a><span>  </span><a name="local-8214565720323796772"><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier">zoom</span></a></a><span> </span><a name="local-6989586621679022349"><a href="#local-6989586621679022349"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Strict</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">StateT</span><span> </span><a name="local-6989586621679022350"><a href="#local-6989586621679022350"><span class="hs-identifier">m</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Strict</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">StateT</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">unfocusing</span><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022349"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Focusing"><span class="hs-identifier hs-var">Focusing</span></a><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022350"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-345"></a><span>  </span><span class="hs-pragma">{-# INLINE zoom #-}</span><span>
</span><a name="line-346"></a><span>
</span><a name="line-347"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679022341"><span class="hs-identifier hs-type">z</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Lazy</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">StateT</span><span> </span><a href="#local-6989586621679022342"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022341"><span class="hs-identifier hs-type">z</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Lazy</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">StateT</span><span> </span><a href="#local-6989586621679022343"><span class="hs-identifier hs-type">t</span></a><span> </span><a href="#local-6989586621679022341"><span class="hs-identifier hs-type">z</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022342"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022343"><span class="hs-identifier hs-type">t</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-348"></a><span>  </span><a name="local-8214565720323796772"><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier">zoom</span></a></a><span> </span><a name="local-6989586621679022344"><a href="#local-6989586621679022344"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Lazy</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">StateT</span><span> </span><a name="local-6989586621679022345"><a href="#local-6989586621679022345"><span class="hs-identifier">m</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Lazy</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">StateT</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">unfocusing</span><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022344"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Focusing"><span class="hs-identifier hs-var">Focusing</span></a><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022345"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-349"></a><span>  </span><span class="hs-pragma">{-# INLINE zoom #-}</span><span>
</span><a name="line-350"></a><span>
</span><a name="line-351"></a><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span> </span><a href="#local-6989586621679022334"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022335"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679022336"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022337"><span class="hs-identifier hs-type">t</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">ReaderT</span><span> </span><a href="#local-6989586621679022338"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679022334"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">ReaderT</span><span> </span><a href="#local-6989586621679022338"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679022335"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022336"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022337"><span class="hs-identifier hs-type">t</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-352"></a><span>  </span><a name="local-8214565720323796772"><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier">zoom</span></a></a><span> </span><a name="local-6989586621679022339"><a href="#local-6989586621679022339"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ReaderT</span><span> </span><a name="local-6989586621679022340"><a href="#local-6989586621679022340"><span class="hs-identifier">m</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">ReaderT</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier hs-var">zoom</span></a><span> </span><a href="#local-6989586621679022339"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="#local-6989586621679022340"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-353"></a><span>  </span><span class="hs-pragma">{-# INLINE zoom #-}</span><span>
</span><a name="line-354"></a><span>
</span><a name="line-355"></a><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span> </span><a href="#local-6989586621679022328"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022329"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679022330"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022331"><span class="hs-identifier hs-type">t</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">IdentityT</span><span> </span><a href="#local-6989586621679022328"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">IdentityT</span><span> </span><a href="#local-6989586621679022329"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022330"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022331"><span class="hs-identifier hs-type">t</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-356"></a><span>  </span><a name="local-8214565720323796772"><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier">zoom</span></a></a><span> </span><a name="local-6989586621679022332"><a href="#local-6989586621679022332"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">IdentityT</span><span> </span><a name="local-6989586621679022333"><a href="#local-6989586621679022333"><span class="hs-identifier">m</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">IdentityT</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier hs-var">zoom</span></a><span> </span><a href="#local-6989586621679022332"><span class="hs-identifier hs-var">l</span></a><span> </span><a href="#local-6989586621679022333"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-357"></a><span>  </span><span class="hs-pragma">{-# INLINE zoom #-}</span><span>
</span><a name="line-358"></a><span>
</span><a name="line-359"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monoid</span><span> </span><a href="#local-6989586621679022320"><span class="hs-identifier hs-type">w</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679022321"><span class="hs-identifier hs-type">z</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Strict</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">RWST</span><span> </span><a href="#local-6989586621679022322"><span class="hs-identifier hs-type">r</span></a><span> </span><a href="#local-6989586621679022320"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022323"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022321"><span class="hs-identifier hs-type">z</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Strict</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">RWST</span><span> </span><a href="#local-6989586621679022322"><span class="hs-identifier hs-type">r</span></a><span> </span><a href="#local-6989586621679022320"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022324"><span class="hs-identifier hs-type">t</span></a><span> </span><a href="#local-6989586621679022321"><span class="hs-identifier hs-type">z</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022323"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022324"><span class="hs-identifier hs-type">t</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-360"></a><span>  </span><a name="local-8214565720323796772"><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier">zoom</span></a></a><span> </span><a name="local-6989586621679022325"><a href="#local-6989586621679022325"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Strict</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">RWST</span><span> </span><a name="local-6989586621679022326"><a href="#local-6989586621679022326"><span class="hs-identifier">m</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Strict</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">RWST</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679022327"><a href="#local-6989586621679022327"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">unfocusingWith</span><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022325"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingWith"><span class="hs-identifier hs-var">FocusingWith</span></a><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022326"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="#local-6989586621679022327"><span class="hs-identifier hs-var">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-361"></a><span>  </span><span class="hs-pragma">{-# INLINE zoom #-}</span><span>
</span><a name="line-362"></a><span>
</span><a name="line-363"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monoid</span><span> </span><a href="#local-6989586621679022312"><span class="hs-identifier hs-type">w</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679022313"><span class="hs-identifier hs-type">z</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Lazy</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">RWST</span><span> </span><a href="#local-6989586621679022314"><span class="hs-identifier hs-type">r</span></a><span> </span><a href="#local-6989586621679022312"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022315"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022313"><span class="hs-identifier hs-type">z</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Lazy</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">RWST</span><span> </span><a href="#local-6989586621679022314"><span class="hs-identifier hs-type">r</span></a><span> </span><a href="#local-6989586621679022312"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022316"><span class="hs-identifier hs-type">t</span></a><span> </span><a href="#local-6989586621679022313"><span class="hs-identifier hs-type">z</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022315"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022316"><span class="hs-identifier hs-type">t</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-364"></a><span>  </span><a name="local-8214565720323796772"><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier">zoom</span></a></a><span> </span><a name="local-6989586621679022317"><a href="#local-6989586621679022317"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Lazy</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">RWST</span><span> </span><a name="local-6989586621679022318"><a href="#local-6989586621679022318"><span class="hs-identifier">m</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Lazy</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">RWST</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679022319"><a href="#local-6989586621679022319"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">unfocusingWith</span><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022317"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingWith"><span class="hs-identifier hs-var">FocusingWith</span></a><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022318"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="#local-6989586621679022319"><span class="hs-identifier hs-var">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-365"></a><span>  </span><span class="hs-pragma">{-# INLINE zoom #-}</span><span>
</span><a name="line-366"></a><span>
</span><a name="line-367"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monoid</span><span> </span><a href="#local-6989586621679022305"><span class="hs-identifier hs-type">w</span></a><span class="hs-special">,</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span> </span><a href="#local-6989586621679022306"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022307"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679022308"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022309"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Strict</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">WriterT</span><span> </span><a href="#local-6989586621679022305"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022306"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Strict</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">WriterT</span><span> </span><a href="#local-6989586621679022305"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022307"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022308"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022309"><span class="hs-identifier hs-type">t</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-368"></a><span>  </span><a name="local-8214565720323796772"><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier">zoom</span></a></a><span> </span><a name="local-6989586621679022310"><a href="#local-6989586621679022310"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Strict</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">WriterT</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier hs-var">zoom</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679022311"><a href="#local-6989586621679022311"><span class="hs-identifier">afb</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">unfocusingPlus</span><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022310"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingPlus"><span class="hs-identifier hs-var">FocusingPlus</span></a><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022311"><span class="hs-identifier hs-var">afb</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier">Strict</span><span class="hs-operator">.</span><span class="hs-identifier">runWriterT</span><span>
</span><a name="line-369"></a><span>  </span><span class="hs-pragma">{-# INLINE zoom #-}</span><span>
</span><a name="line-370"></a><span>
</span><a name="line-371"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monoid</span><span> </span><a href="#local-6989586621679022298"><span class="hs-identifier hs-type">w</span></a><span class="hs-special">,</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span> </span><a href="#local-6989586621679022299"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022300"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679022301"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022302"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Lazy</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">WriterT</span><span> </span><a href="#local-6989586621679022298"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022299"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Lazy</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">WriterT</span><span> </span><a href="#local-6989586621679022298"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022300"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022301"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022302"><span class="hs-identifier hs-type">t</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-372"></a><span>  </span><a name="local-8214565720323796772"><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier">zoom</span></a></a><span> </span><a name="local-6989586621679022303"><a href="#local-6989586621679022303"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Lazy</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">WriterT</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier hs-var">zoom</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679022304"><a href="#local-6989586621679022304"><span class="hs-identifier">afb</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">unfocusingPlus</span><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022303"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingPlus"><span class="hs-identifier hs-var">FocusingPlus</span></a><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022304"><span class="hs-identifier hs-var">afb</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier">Lazy</span><span class="hs-operator">.</span><span class="hs-identifier">runWriterT</span><span>
</span><a name="line-373"></a><span>  </span><span class="hs-pragma">{-# INLINE zoom #-}</span><span>
</span><a name="line-374"></a><span>
</span><a name="line-375"></a><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span> </span><a href="#local-6989586621679022292"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022293"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679022294"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022295"><span class="hs-identifier hs-type">t</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">ListT</span><span> </span><a href="#local-6989586621679022292"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">ListT</span><span> </span><a href="#local-6989586621679022293"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022294"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022295"><span class="hs-identifier hs-type">t</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-376"></a><span>  </span><a name="local-8214565720323796772"><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier">zoom</span></a></a><span> </span><a name="local-6989586621679022296"><a href="#local-6989586621679022296"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">ListT</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier hs-var">zoom</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679022297"><a href="#local-6989586621679022297"><span class="hs-identifier">afb</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">unfocusingOn</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="#local-6989586621679022296"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingOn"><span class="hs-identifier hs-var">FocusingOn</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="#local-6989586621679022297"><span class="hs-identifier hs-var">afb</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier">runListT</span><span>
</span><a name="line-377"></a><span>  </span><span class="hs-pragma">{-# INLINE zoom #-}</span><span>
</span><a name="line-378"></a><span>
</span><a name="line-379"></a><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span> </span><a href="#local-6989586621679022286"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022287"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679022288"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022289"><span class="hs-identifier hs-type">t</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">MaybeT</span><span> </span><a href="#local-6989586621679022286"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">MaybeT</span><span> </span><a href="#local-6989586621679022287"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022288"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022289"><span class="hs-identifier hs-type">t</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-380"></a><span>  </span><a name="local-8214565720323796772"><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier">zoom</span></a></a><span> </span><a name="local-6989586621679022290"><a href="#local-6989586621679022290"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">MaybeT</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">liftM</span><span> </span><span class="hs-identifier">getMay</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier hs-var">zoom</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679022291"><a href="#local-6989586621679022291"><span class="hs-identifier">afb</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">unfocusingMay</span><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022290"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingMay"><span class="hs-identifier hs-var">FocusingMay</span></a><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022291"><span class="hs-identifier hs-var">afb</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">liftM</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#May"><span class="hs-identifier hs-var">May</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier">runMaybeT</span><span>
</span><a name="line-381"></a><span>  </span><span class="hs-pragma">{-# INLINE zoom #-}</span><span>
</span><a name="line-382"></a><span>
</span><a name="line-383"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Error</span><span> </span><a href="#local-6989586621679022279"><span class="hs-identifier hs-type">e</span></a><span class="hs-special">,</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span> </span><a href="#local-6989586621679022280"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022281"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679022282"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022283"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">ErrorT</span><span> </span><a href="#local-6989586621679022279"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679022280"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">ErrorT</span><span> </span><a href="#local-6989586621679022279"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679022281"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022282"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022283"><span class="hs-identifier hs-type">t</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-384"></a><span>  </span><a name="local-8214565720323796772"><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier">zoom</span></a></a><span> </span><a name="local-6989586621679022284"><a href="#local-6989586621679022284"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">ErrorT</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">liftM</span><span> </span><span class="hs-identifier">getErr</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier hs-var">zoom</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679022285"><a href="#local-6989586621679022285"><span class="hs-identifier">afb</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">unfocusingErr</span><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022284"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingErr"><span class="hs-identifier hs-var">FocusingErr</span></a><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022285"><span class="hs-identifier hs-var">afb</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">liftM</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Err"><span class="hs-identifier hs-var">Err</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier">runErrorT</span><span>
</span><a name="line-385"></a><span>  </span><span class="hs-pragma">{-# INLINE zoom #-}</span><span>
</span><a name="line-386"></a><span>
</span><a name="line-387"></a><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span> </span><a href="#local-6989586621679022272"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022273"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679022274"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022275"><span class="hs-identifier hs-type">t</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Zoom"><span class="hs-identifier hs-type">Zoom</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">ExceptT</span><span> </span><a href="#local-6989586621679022276"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679022272"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">ExceptT</span><span> </span><a href="#local-6989586621679022276"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679022273"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022274"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022275"><span class="hs-identifier hs-type">t</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-388"></a><span>  </span><a name="local-8214565720323796772"><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier">zoom</span></a></a><span> </span><a name="local-6989586621679022277"><a href="#local-6989586621679022277"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">ExceptT</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">liftM</span><span> </span><span class="hs-identifier">getErr</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier hs-var">zoom</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679022278"><a href="#local-6989586621679022278"><span class="hs-identifier">afb</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">unfocusingErr</span><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022277"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#FocusingErr"><span class="hs-identifier hs-var">FocusingErr</span></a><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022278"><span class="hs-identifier hs-var">afb</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">liftM</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Err"><span class="hs-identifier hs-var">Err</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">runExceptT</span><span>
</span><a name="line-389"></a><span>  </span><span class="hs-pragma">{-# INLINE zoom #-}</span><span>
</span><a name="line-390"></a><span>
</span><a name="line-391"></a><span class="hs-comment">-- TODO: instance Zoom m m a a =&gt; Zoom (ContT r m) (ContT r m) a a where</span><span>
</span><a name="line-392"></a><span>
</span><a name="line-393"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-394"></a><span class="hs-comment">-- Magnified</span><span>
</span><a name="line-395"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-396"></a><span>
</span><a name="line-397"></a><span class="hs-comment">-- | This type family is used by 'Magnify' to describe the common effect type.</span><span>
</span><a name="line-398"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><a name="Magnified"><a href="Lens.Micro.Mtl.Internal.html#Magnified"><span class="hs-identifier">Magnified</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679022168"><a href="#local-6989586621679022168"><span class="hs-identifier">m</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-operator hs-type">*</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-operator hs-type">*</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-operator hs-type">*</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-operator hs-type">*</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-operator hs-type">*</span><span>
</span><a name="line-399"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Magnified"><span class="hs-identifier hs-type">Magnified</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">ReaderT</span><span> </span><a href="#local-6989586621679022270"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679022271"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Effect"><span class="hs-identifier hs-type">Effect</span></a><span> </span><a href="#local-6989586621679022271"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-400"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Magnified"><span class="hs-identifier hs-type">Magnified</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-glyph">-&gt;</span><span class="hs-special">)</span><a href="#local-6989586621679022269"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">Const</span><span>
</span><a name="line-401"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Magnified"><span class="hs-identifier hs-type">Magnified</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Strict</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">RWST</span><span> </span><a href="#local-6989586621679022265"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679022266"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022267"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022268"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#EffectRWS"><span class="hs-identifier hs-type">EffectRWS</span></a><span> </span><a href="#local-6989586621679022266"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022267"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022268"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-402"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Magnified"><span class="hs-identifier hs-type">Magnified</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Lazy</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">RWST</span><span> </span><a href="#local-6989586621679022261"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679022262"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022263"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022264"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#EffectRWS"><span class="hs-identifier hs-type">EffectRWS</span></a><span> </span><a href="#local-6989586621679022262"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022263"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022264"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-403"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Magnified"><span class="hs-identifier hs-type">Magnified</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">IdentityT</span><span> </span><a href="#local-6989586621679022260"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Magnified"><span class="hs-identifier hs-type">Magnified</span></a><span> </span><a href="#local-6989586621679022260"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-404"></a><span>
</span><a name="line-405"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-406"></a><span class="hs-comment">-- Magnify</span><span>
</span><a name="line-407"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-408"></a><span>
</span><a name="line-409"></a><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">2</span><span> </span><span class="hs-special">`</span><span class="hs-identifier">magnify</span><span class="hs-special">`</span><span>
</span><a name="line-410"></a><span>
</span><a name="line-411"></a><span class="hs-keyword">class</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Magnified"><span class="hs-identifier hs-type">Magnified</span></a><span> </span><a href="#local-6989586621679021895"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">~</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Magnified"><span class="hs-identifier hs-type">Magnified</span></a><span> </span><a href="#local-6989586621679021896"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">MonadReader</span><span> </span><a href="#local-6989586621679021897"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679021895"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">MonadReader</span><span> </span><a href="#local-6989586621679021898"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679021896"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a name="Magnify"><a href="Lens.Micro.Mtl.Internal.html#Magnify"><span class="hs-identifier">Magnify</span></a></a><span> </span><a name="local-6989586621679021895"><a href="#local-6989586621679021895"><span class="hs-identifier">m</span></a></a><span> </span><a name="local-6989586621679021896"><a href="#local-6989586621679021896"><span class="hs-identifier">n</span></a></a><span> </span><a name="local-6989586621679021897"><a href="#local-6989586621679021897"><span class="hs-identifier">b</span></a></a><span> </span><a name="local-6989586621679021898"><a href="#local-6989586621679021898"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">b</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">n</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">a</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">n</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">n</span><span> </span><span class="hs-identifier">b</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-412"></a><span>  </span><span class="hs-comment">{- |
This is an equivalent of 'Reader.local' which lets you apply a getter to your environment instead of merely applying a function (and it also lets you change the type of the environment).

@
'Reader.local'   :: (r -&gt; r)   -&gt; 'Reader.Reader' r a -&gt; 'Reader.Reader' r a
'magnify' :: Getter r x -&gt; 'Reader.Reader' x a -&gt; 'Reader.Reader' r a
@

'magnify' works with 'Reader.Reader' \/ 'Reader.ReaderT', 'Lazy.RWS' \/ 'Lazy.RWST', and @(-&gt;)@.

Here's an example of 'magnify' being used to work with a part of a bigger config. First, the types:

@
data URL = URL {
  _protocol :: Maybe String,
  _path :: String }

data Config = Config {
  _base :: URL,
  ... }

makeLenses ''URL
makeLenses ''Config
@

Now, let's define a function which returns the base url:

@
getBase :: 'Reader.Reader' Config String
getBase = do
  protocol \&lt;- 'Data.Maybe.fromMaybe' \&quot;https\&quot; '&lt;$&gt;' 'Lens.Micro.Mtl.view' (base.protocol)
  path     \&lt;- 'Lens.Micro.Mtl.view' (base.path)
  return (protocol ++ path)
@

With 'magnify', we can factor out @base@:

@
getBase = 'magnify' base $ do
  protocol \&lt;- 'Data.Maybe.fromMaybe' \&quot;https\&quot; '&lt;$&gt;' 'Lens.Micro.Mtl.view' protocol
  path     \&lt;- 'Lens.Micro.Mtl.view' path
  return (protocol ++ path)
@

This concludes the example.

Finally, you should know writing instances of 'Magnify' for your own types can be done as follows:

@
import &quot;Lens.Micro.Mtl.Internal&quot;

type instance 'Magnified' (MyReaderT r m) = 'Magnified' (ReaderT r m)

instance Monad m =\&gt; 'Magnify' (MyReaderT r m) (MyReaderT t m) r t where
    'magnify' l (MyReaderT m) = MyReaderT ('magnify' l m)
@
  -}</span><span>
</span><a name="line-469"></a><span>  </span><span class="hs-identifier">magnify</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">LensLike'</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Magnified"><span class="hs-identifier hs-type">Magnified</span></a><span> </span><a href="#local-6989586621679021895"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022167"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679021898"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679021897"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679021895"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022167"><span class="hs-identifier hs-type">c</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679021896"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679022167"><span class="hs-identifier hs-type">c</span></a><span>
</span><a name="line-470"></a><span>
</span><a name="line-471"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679022255"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Magnify"><span class="hs-identifier hs-type">Magnify</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">ReaderT</span><span> </span><a href="#local-6989586621679022256"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679022255"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">ReaderT</span><span> </span><a href="#local-6989586621679022257"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679022255"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022256"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679022257"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-472"></a><span>  </span><a name="local-8214565720323796769"><a href="Lens.Micro.Mtl.Internal.html#magnify"><span class="hs-identifier">magnify</span></a></a><span> </span><a name="local-6989586621679022258"><a href="#local-6989586621679022258"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ReaderT</span><span> </span><a name="local-6989586621679022259"><a href="#local-6989586621679022259"><span class="hs-identifier">m</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">ReaderT</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">getEffect</span><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022258"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Effect"><span class="hs-identifier hs-var">Effect</span></a><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022259"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-473"></a><span>  </span><span class="hs-pragma">{-# INLINE magnify #-}</span><span>
</span><a name="line-474"></a><span>
</span><a name="line-475"></a><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Magnify"><span class="hs-identifier hs-type">Magnify</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-glyph">-&gt;</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022251"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-glyph">-&gt;</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022252"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022251"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679022252"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-476"></a><span>  </span><a name="local-8214565720323796769"><a href="Lens.Micro.Mtl.Internal.html#magnify"><span class="hs-identifier">magnify</span></a></a><span> </span><a name="local-6989586621679022253"><a href="#local-6989586621679022253"><span class="hs-identifier">l</span></a></a><span> </span><a name="local-6989586621679022254"><a href="#local-6989586621679022254"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Reader</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">asks</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">getConst</span><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022253"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Const</span><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022254"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-477"></a><span>  </span><span class="hs-pragma">{-# INLINE magnify #-}</span><span>
</span><a name="line-478"></a><span>
</span><a name="line-479"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679022244"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Monoid</span><span> </span><a href="#local-6989586621679022245"><span class="hs-identifier hs-type">w</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Magnify"><span class="hs-identifier hs-type">Magnify</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Strict</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">RWST</span><span> </span><a href="#local-6989586621679022246"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679022245"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022247"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022244"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Strict</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">RWST</span><span> </span><a href="#local-6989586621679022248"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679022245"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022247"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022244"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022246"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679022248"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-480"></a><span>  </span><a name="local-8214565720323796769"><a href="Lens.Micro.Mtl.Internal.html#magnify"><span class="hs-identifier">magnify</span></a></a><span> </span><a name="local-6989586621679022249"><a href="#local-6989586621679022249"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Strict</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">RWST</span><span> </span><a name="local-6989586621679022250"><a href="#local-6989586621679022250"><span class="hs-identifier">m</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Strict</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">RWST</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">getEffectRWS</span><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022249"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#EffectRWS"><span class="hs-identifier hs-var">EffectRWS</span></a><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022250"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-481"></a><span>  </span><span class="hs-pragma">{-# INLINE magnify #-}</span><span>
</span><a name="line-482"></a><span>
</span><a name="line-483"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679022237"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Monoid</span><span> </span><a href="#local-6989586621679022238"><span class="hs-identifier hs-type">w</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Magnify"><span class="hs-identifier hs-type">Magnify</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Lazy</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">RWST</span><span> </span><a href="#local-6989586621679022239"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679022238"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022240"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022237"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Lazy</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">RWST</span><span> </span><a href="#local-6989586621679022241"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679022238"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022240"><span class="hs-identifier hs-type">s</span></a><span> </span><a href="#local-6989586621679022237"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022239"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679022241"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-484"></a><span>  </span><a name="local-8214565720323796769"><a href="Lens.Micro.Mtl.Internal.html#magnify"><span class="hs-identifier">magnify</span></a></a><span> </span><a name="local-6989586621679022242"><a href="#local-6989586621679022242"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Lazy</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">RWST</span><span> </span><a name="local-6989586621679022243"><a href="#local-6989586621679022243"><span class="hs-identifier">m</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Lazy</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">RWST</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">getEffectRWS</span><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022242"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#EffectRWS"><span class="hs-identifier hs-var">EffectRWS</span></a><span> </span><span class="hs-operator hs-var">#.</span><span> </span><a href="#local-6989586621679022243"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-485"></a><span>  </span><span class="hs-pragma">{-# INLINE magnify #-}</span><span>
</span><a name="line-486"></a><span>
</span><a name="line-487"></a><span class="hs-keyword">instance</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Magnify"><span class="hs-identifier hs-type">Magnify</span></a><span> </span><a href="#local-6989586621679022231"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022232"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679022233"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679022234"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Magnify"><span class="hs-identifier hs-type">Magnify</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">IdentityT</span><span> </span><a href="#local-6989586621679022231"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">IdentityT</span><span> </span><a href="#local-6989586621679022232"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679022233"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679022234"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-488"></a><span>  </span><a name="local-8214565720323796769"><a href="Lens.Micro.Mtl.Internal.html#magnify"><span class="hs-identifier">magnify</span></a></a><span> </span><a name="local-6989586621679022235"><a href="#local-6989586621679022235"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">IdentityT</span><span> </span><a name="local-6989586621679022236"><a href="#local-6989586621679022236"><span class="hs-identifier">m</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">IdentityT</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#magnify"><span class="hs-identifier hs-var">magnify</span></a><span> </span><a href="#local-6989586621679022235"><span class="hs-identifier hs-var">l</span></a><span> </span><a href="#local-6989586621679022236"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-489"></a><span>  </span><span class="hs-pragma">{-# INLINE magnify #-}</span><span>
</span><a name="line-490"></a><span>
</span><a name="line-491"></a><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><a name="line-492"></a><span class="hs-comment">--- Effect</span><span>
</span><a name="line-493"></a><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><a name="line-494"></a><span>
</span><a name="line-495"></a><span class="hs-comment">-- | Wrap a monadic effect with a phantom type argument.</span><span>
</span><a name="line-496"></a><span class="hs-keyword">newtype</span><span> </span><a name="Effect"><a href="Lens.Micro.Mtl.Internal.html#Effect"><span class="hs-identifier">Effect</span></a></a><span> </span><a name="local-6989586621679021892"><a href="#local-6989586621679021892"><span class="hs-identifier">m</span></a></a><span> </span><a name="local-6989586621679021893"><a href="#local-6989586621679021893"><span class="hs-identifier">r</span></a></a><span> </span><a name="local-6989586621679021894"><a href="#local-6989586621679021894"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Effect"><a href="Lens.Micro.Mtl.Internal.html#Effect"><span class="hs-identifier">Effect</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="getEffect"><a href="Lens.Micro.Mtl.Internal.html#getEffect"><span class="hs-identifier">getEffect</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679021892"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679021893"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-497"></a><span class="hs-comment">-- type role Effect representational nominal phantom</span><span>
</span><a name="line-498"></a><span>
</span><a name="line-499"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Functor</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Effect"><span class="hs-identifier hs-type">Effect</span></a><span> </span><a href="#local-6989586621679022228"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022229"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-500"></a><span>  </span><a name="local-3458764513820541101"><span class="hs-identifier">fmap</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Effect"><span class="hs-identifier hs-var">Effect</span></a><span> </span><a name="local-6989586621679022230"><a href="#local-6989586621679022230"><span class="hs-identifier">m</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Effect"><span class="hs-identifier hs-var">Effect</span></a><span> </span><a href="#local-6989586621679022230"><span class="hs-identifier hs-var">m</span></a><span>
</span><a name="line-501"></a><span>  </span><span class="hs-pragma">{-# INLINE fmap #-}</span><span>
</span><a name="line-502"></a><span>
</span><a name="line-503"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679022223"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Monoid</span><span> </span><a href="#local-6989586621679022224"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Monoid</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Effect"><span class="hs-identifier hs-type">Effect</span></a><span> </span><a href="#local-6989586621679022223"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022224"><span class="hs-identifier hs-type">r</span></a><span> </span><a href="#local-6989586621679022225"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-504"></a><span>  </span><a name="local-3458764513820541442"><span class="hs-identifier">mempty</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Effect"><span class="hs-identifier hs-var">Effect</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-identifier hs-var">mempty</span><span class="hs-special">)</span><span>
</span><a name="line-505"></a><span>  </span><span class="hs-pragma">{-# INLINE mempty #-}</span><span>
</span><a name="line-506"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#Effect"><span class="hs-identifier hs-var">Effect</span></a><span> </span><a name="local-6989586621679022226"><a href="#local-6989586621679022226"><span class="hs-identifier">ma</span></a></a><span> </span><span class="hs-special">`</span><a name="local-3458764513820541443"><span class="hs-identifier">mappend</span></a><span class="hs-special">`</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Effect"><span class="hs-identifier hs-var">Effect</span></a><span> </span><a name="local-6989586621679022227"><a href="#local-6989586621679022227"><span class="hs-identifier">mb</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Effect"><span class="hs-identifier hs-var">Effect</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">liftM2</span><span> </span><span class="hs-identifier hs-var">mappend</span><span> </span><a href="#local-6989586621679022226"><span class="hs-identifier hs-var">ma</span></a><span> </span><a href="#local-6989586621679022227"><span class="hs-identifier hs-var">mb</span></a><span class="hs-special">)</span><span>
</span><a name="line-507"></a><span>  </span><span class="hs-pragma">{-# INLINE mappend #-}</span><span>
</span><a name="line-508"></a><span>
</span><a name="line-509"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679022219"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Monoid</span><span> </span><a href="#local-6989586621679022220"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Applicative</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#Effect"><span class="hs-identifier hs-type">Effect</span></a><span> </span><a href="#local-6989586621679022219"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022220"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-510"></a><span>  </span><a name="local-3458764513820541680"><span class="hs-identifier">pure</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Effect"><span class="hs-identifier hs-var">Effect</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-identifier hs-var">mempty</span><span class="hs-special">)</span><span>
</span><a name="line-511"></a><span>  </span><span class="hs-pragma">{-# INLINE pure #-}</span><span>
</span><a name="line-512"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#Effect"><span class="hs-identifier hs-var">Effect</span></a><span> </span><a name="local-6989586621679022221"><a href="#local-6989586621679022221"><span class="hs-identifier">ma</span></a></a><span> </span><a name="local-3458764513820541679"><span class="hs-operator">&lt;*&gt;</span></a><span> </span><a href="Lens.Micro.Mtl.Internal.html#Effect"><span class="hs-identifier hs-var">Effect</span></a><span> </span><a name="local-6989586621679022222"><a href="#local-6989586621679022222"><span class="hs-identifier">mb</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#Effect"><span class="hs-identifier hs-var">Effect</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">liftM2</span><span> </span><span class="hs-identifier hs-var">mappend</span><span> </span><a href="#local-6989586621679022221"><span class="hs-identifier hs-var">ma</span></a><span> </span><a href="#local-6989586621679022222"><span class="hs-identifier hs-var">mb</span></a><span class="hs-special">)</span><span>
</span><a name="line-513"></a><span>  </span><span class="hs-pragma">{-# INLINE (&lt;*&gt;) #-}</span><span>
</span><a name="line-514"></a><span>
</span><a name="line-515"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-516"></a><span class="hs-comment">-- EffectRWS</span><span>
</span><a name="line-517"></a><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><a name="line-518"></a><span>
</span><a name="line-519"></a><span class="hs-comment">-- | Wrap a monadic effect with a phantom type argument. Used when magnifying 'Control.Monad.RWS.RWST'.</span><span>
</span><a name="line-520"></a><span class="hs-keyword">newtype</span><span> </span><a name="EffectRWS"><a href="Lens.Micro.Mtl.Internal.html#EffectRWS"><span class="hs-identifier">EffectRWS</span></a></a><span> </span><a name="local-6989586621679021887"><a href="#local-6989586621679021887"><span class="hs-identifier">w</span></a></a><span> </span><a name="local-6989586621679021888"><a href="#local-6989586621679021888"><span class="hs-identifier">st</span></a></a><span> </span><a name="local-6989586621679021889"><a href="#local-6989586621679021889"><span class="hs-identifier">m</span></a></a><span> </span><a name="local-6989586621679021890"><a href="#local-6989586621679021890"><span class="hs-identifier">s</span></a></a><span> </span><a name="local-6989586621679021891"><a href="#local-6989586621679021891"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="EffectRWS"><a href="Lens.Micro.Mtl.Internal.html#EffectRWS"><span class="hs-identifier">EffectRWS</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="getEffectRWS"><a href="Lens.Micro.Mtl.Internal.html#getEffectRWS"><span class="hs-identifier">getEffectRWS</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679021888"><span class="hs-identifier hs-type">st</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679021889"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679021890"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">,</span><a href="#local-6989586621679021888"><span class="hs-identifier hs-type">st</span></a><span class="hs-special">,</span><a href="#local-6989586621679021887"><span class="hs-identifier hs-type">w</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-521"></a><span>
</span><a name="line-522"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Functor</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#EffectRWS"><span class="hs-identifier hs-type">EffectRWS</span></a><span> </span><a href="#local-6989586621679022214"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022215"><span class="hs-identifier hs-type">st</span></a><span> </span><a href="#local-6989586621679022216"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022217"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-523"></a><span>  </span><a name="local-3458764513820541101"><span class="hs-identifier">fmap</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#EffectRWS"><span class="hs-identifier hs-var">EffectRWS</span></a><span> </span><a name="local-6989586621679022218"><a href="#local-6989586621679022218"><span class="hs-identifier">m</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#EffectRWS"><span class="hs-identifier hs-var">EffectRWS</span></a><span> </span><a href="#local-6989586621679022218"><span class="hs-identifier hs-var">m</span></a><span>
</span><a name="line-524"></a><span>  </span><span class="hs-pragma">{-# INLINE fmap #-}</span><span>
</span><a name="line-525"></a><span>
</span><a name="line-526"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monoid</span><span> </span><a href="#local-6989586621679022200"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Monoid</span><span> </span><a href="#local-6989586621679022201"><span class="hs-identifier hs-type">w</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679022202"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Applicative</span><span> </span><span class="hs-special">(</span><a href="Lens.Micro.Mtl.Internal.html#EffectRWS"><span class="hs-identifier hs-type">EffectRWS</span></a><span> </span><a href="#local-6989586621679022201"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679022203"><span class="hs-identifier hs-type">st</span></a><span> </span><a href="#local-6989586621679022202"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679022200"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-527"></a><span>  </span><a name="local-3458764513820541680"><span class="hs-identifier">pure</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#EffectRWS"><span class="hs-identifier hs-var">EffectRWS</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679022204"><a href="#local-6989586621679022204"><span class="hs-identifier">st</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">mempty</span><span class="hs-special">,</span><span> </span><a href="#local-6989586621679022204"><span class="hs-identifier hs-var">st</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">mempty</span><span class="hs-special">)</span><span>
</span><a name="line-528"></a><span>  </span><span class="hs-pragma">{-# INLINE pure #-}</span><span>
</span><a name="line-529"></a><span>  </span><a href="Lens.Micro.Mtl.Internal.html#EffectRWS"><span class="hs-identifier hs-var">EffectRWS</span></a><span> </span><a name="local-6989586621679022205"><a href="#local-6989586621679022205"><span class="hs-identifier">m</span></a></a><span> </span><a name="local-3458764513820541679"><span class="hs-operator">&lt;*&gt;</span></a><span> </span><a href="Lens.Micro.Mtl.Internal.html#EffectRWS"><span class="hs-identifier hs-var">EffectRWS</span></a><span> </span><a name="local-6989586621679022206"><a href="#local-6989586621679022206"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lens.Micro.Mtl.Internal.html#EffectRWS"><span class="hs-identifier hs-var">EffectRWS</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679022207"><a href="#local-6989586621679022207"><span class="hs-identifier">st</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679022205"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="#local-6989586621679022207"><span class="hs-identifier hs-var">st</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679022208"><a href="#local-6989586621679022208"><span class="hs-identifier">s</span></a></a><span class="hs-special">,</span><a name="local-6989586621679022209"><a href="#local-6989586621679022209"><span class="hs-identifier">t</span></a></a><span class="hs-special">,</span><a name="local-6989586621679022210"><a href="#local-6989586621679022210"><span class="hs-identifier">w</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679022206"><span class="hs-identifier hs-var">n</span></a><span> </span><a href="#local-6989586621679022209"><span class="hs-identifier hs-var">t</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679022211"><a href="#local-6989586621679022211"><span class="hs-identifier">s'</span></a></a><span class="hs-special">,</span><a name="local-6989586621679022212"><a href="#local-6989586621679022212"><span class="hs-identifier">u</span></a></a><span class="hs-special">,</span><a name="local-6989586621679022213"><a href="#local-6989586621679022213"><span class="hs-identifier">w'</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">mappend</span><span> </span><a href="#local-6989586621679022208"><span class="hs-identifier hs-var">s</span></a><span> </span><a href="#local-6989586621679022211"><span class="hs-identifier hs-var">s'</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679022212"><span class="hs-identifier hs-var">u</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">mappend</span><span> </span><a href="#local-6989586621679022210"><span class="hs-identifier hs-var">w</span></a><span> </span><a href="#local-6989586621679022213"><span class="hs-identifier hs-var">w'</span></a><span class="hs-special">)</span><span>
</span><a name="line-530"></a><span>  </span><span class="hs-pragma">{-# INLINE (&lt;*&gt;) #-}</span><span>
</span><a name="line-531"></a></pre></body></html>